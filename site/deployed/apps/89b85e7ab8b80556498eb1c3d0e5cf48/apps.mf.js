/*
 
 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE 
*/
jQuery.cookie=function(a,e,b){if(typeof e!="undefined"){b=b||{};if(e===null){e="";b=$.extend({},b);b.expires=-1}var d="";if(b.expires&&(typeof b.expires=="number"||b.expires.toUTCString)){if(typeof b.expires=="number"){d=new Date;d.setTime(d.getTime()+b.expires*24*60*60*1E3)}else d=b.expires;d="; expires="+d.toUTCString()}var f=b.path?"; path="+b.path:"",c=b.domain?"; domain="+b.domain:"";b=b.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(e),d,f,c,b].join("")}else{e=null;if(document.cookie&&
document.cookie!=""){b=document.cookie.split(";");for(d=0;d<b.length;d++){f=jQuery.trim(b[d]);if(f.substring(0,a.length+1)==a+"="){e=decodeURIComponent(f.substring(a.length+1));break}}}return e}};
jQuery.fn.textPlaceholder=function(a){a=a||"#AAA";return this.each(function(){var e=this;if(!(e.placeholder&&"placeholder"in document.createElement(e.tagName))){var b=e.style.color,d=e.getAttribute("placeholder"),f=$(e);if(e.value===""||e.value==d){e.value=d;e.style.color=a;f.data("placeholder-visible",true)}f.focus(function(){this.style.color=b;if(f.data("placeholder-visible")){f.data("placeholder-visible",false);this.value=""}});f.blur(function(){if(this.value===""){f.data("placeholder-visible",
true);this.value=d;this.style.color=a}else{this.style.color=b;f.data("placeholder-visible",false)}});e.form&&$(e.form).submit(function(){if(f.data("placeholder-visible"))e.value=""})}})};
(function(a){a.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(e,b){this.defaults.type=e;this.defaults.name=b},get:function(e,b){var d=a.extend({},this.defaults,b);if(!d.single.length)d.single="metadata";var f=a.data(e,d.single);if(f)return f;f="{}";var c=function(i){if(typeof i!="string")return i;return i=eval("("+i+")")};if(d.type=="html5"){var g={};a(e.attributes).each(function(){var i=this.nodeName;if(i.match(/^data-/))i=i.replace(/^data-/,
"");else return true;g[i]=c(this.nodeValue)})}else{if(d.type=="class"){var h=d.cre.exec(e.className);if(h)f=h[1]}else if(d.type=="elem"){if(!e.getElementsByTagName)return;h=e.getElementsByTagName(d.name);if(h.length)f=a.trim(h[0].innerHTML)}else if(e.getAttribute!=undefined)if(h=e.getAttribute(d.name))f=h;g=c(f.indexOf("{")<0?"{"+f+"}":f)}a.data(e,d.single,g);return g}}});a.fn.metadata=function(e){return a.metadata.get(this[0],e)}})(jQuery);
(function(a){a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.2",plugin:{add:function(e,b,d){e=a.ui[e].prototype;for(var f in d){e.plugins[f]=e.plugins[f]||[];e.plugins[f].push([b,d[f]])}},call:function(e,b,d){if((b=e.plugins[b])&&e.element[0].parentNode)for(var f=0;f<b.length;f++)e.options[b[f][0]]&&b[f][1].apply(e.element,d)}},contains:function(e,b){return document.compareDocumentPosition?e.compareDocumentPosition(b)&16:e!==b&&e.contains(b)},hasScroll:function(e,b){if(a(e).css("overflow")==
"hidden")return false;var d=b&&b=="left"?"scrollLeft":"scrollTop",f=false;if(e[d]>0)return true;e[d]=1;f=e[d]>0;e[d]=0;return f},isOverAxis:function(e,b,d){return e>b&&e<b+d},isOver:function(e,b,d,f,c,g){return a.ui.isOverAxis(e,d,c)&&a.ui.isOverAxis(b,f,g)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(e,b){return typeof e==="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus();b&&b.call(d)},e)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect",
"none")},scrollParent:function(){var e;e=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",
1))}).eq(0);return/fixed/.test(this.css("position"))||!e.length?a(document):e},zIndex:function(e){if(e!==undefined)return this.css("zIndex",e);if(this.length){e=a(this[0]);for(var b;e.length&&e[0]!==document;){b=e.css("position");if(b=="absolute"||b=="relative"||b=="fixed"){b=parseInt(e.css("zIndex"));if(!isNaN(b)&&b!=0)return b}e=e.parent()}}return 0}});a.extend(a.expr[":"],{data:function(e,b,d){return!!a.data(e,d[3])},focusable:function(e){var b=e.nodeName.toLowerCase(),d=a.attr(e,"tabindex");return(/input|select|textarea|button|object/.test(b)?
!e.disabled:"a"==b||"area"==b?e.href||!isNaN(d):!isNaN(d))&&!a(e)["area"==b?"parents":"closest"](":hidden").length},tabbable:function(e){var b=a.attr(e,"tabindex");return(isNaN(b)||b>=0)&&a(e).is(":focusable")}})}})(jQuery);
(function(a){var e=a.fn.remove;a.fn.remove=function(b,d){return this.each(function(){if(!d)if(!b||a.filter(b,[this]).length)a("*",this).add(this).each(function(){a(this).triggerHandler("remove")});return e.call(a(this),b,d)})};a.widget=function(b,d,f){var c=b.split(".")[0],g;b=b.split(".")[1];g=c+"-"+b;if(!f){f=d;d=a.Widget}a.expr[":"][g]=function(h){return!!a.data(h,b)};a[c]=a[c]||{};a[c][b]=function(h,i){arguments.length&&this._createWidget(h,i)};d=new d;d.options=a.extend({},d.options);a[c][b].prototype=
a.extend(true,d,{namespace:c,widgetName:b,widgetEventPrefix:a[c][b].prototype.widgetEventPrefix||b,widgetBaseClass:g},f);a.widget.bridge(b,a[c][b])};a.widget.bridge=function(b,d){a.fn[b]=function(f){var c=typeof f==="string",g=Array.prototype.slice.call(arguments,1),h=this;f=!c&&g.length?a.extend.apply(null,[true,f].concat(g)):f;if(c&&f.substring(0,1)==="_")return h;c?this.each(function(){var i=a.data(this,b),j=i&&a.isFunction(i[f])?i[f].apply(i,g):i;if(j!==i&&j!==undefined){h=j;return false}}):this.each(function(){var i=
a.data(this,b);if(i){f&&i.option(f);i._init()}else a.data(this,b,new d(f,this))});return h}};a.Widget=function(b,d){arguments.length&&this._createWidget(b,d)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,d){this.element=a(d).data(this.widgetName,this);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(d)[this.widgetName],b);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();
this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,d){var f=b,c=this;if(arguments.length===0)return a.extend({},c.options);if(typeof b==="string"){if(d===undefined)return this.options[b];f={};f[b]=d}a.each(f,function(g,
h){c._setOption(g,h)});return c},_setOption:function(b,d){this.options[b]=d;if(b==="disabled")this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",d);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,d,f){var c=this.options[b];d=a.Event(d);d.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();f=f||{};if(d.originalEvent){b=
a.event.props.length;for(var g;b;){g=a.event.props[--b];d[g]=d.originalEvent[g]}}this.element.trigger(d,f);return!(a.isFunction(c)&&c.call(this.element[0],d,f)===false||d.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(b){return e._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(e._preventClickEvent){e._preventClickEvent=false;b.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(e){e.originalEvent=e.originalEvent||{};if(!e.originalEvent.mouseHandled){this._mouseStarted&&
this._mouseUp(e);this._mouseDownEvent=e;var b=this,d=e.which==1,f=typeof this.options.cancel=="string"?a(e.target).parents().add(e.target).filter(this.options.cancel).length:false;if(!d||f||!this._mouseCapture(e))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();
return true}}this._mouseMoveDelegate=function(c){return b._mouseMove(c)};this._mouseUpDelegate=function(c){return b._mouseUp(c)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||e.preventDefault();return e.originalEvent.mouseHandled=true}},_mouseMove:function(e){if(a.browser.msie&&!e.button)return this._mouseUp(e);if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&
this._mouseDelayMet(e))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false)?this._mouseDrag(e):this._mouseUp(e);return!this._mouseStarted},_mouseUp:function(e){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=e.target==this._mouseDownEvent.target;this._mouseStop(e)}return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-
e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var e=/left|center|right/,b=/top|center|bottom/,d=a.fn.position,f=a.fn.offset;a.fn.position=function(c){if(!c||!c.of)return d.apply(this,arguments);c=a.extend({},c);var g=a(c.of),h=(c.collision||"flip").split(" "),i=c.offset?c.offset.split(" "):[0,0],j,o,n;if(c.of.nodeType===9){j=g.width();o=g.height();n={top:0,left:0}}else if(c.of.scrollTo&&c.of.document){j=g.width();o=g.height();n={top:g.scrollTop(),left:g.scrollLeft()}}else if(c.of.preventDefault){c.at="left top";j=o=
0;n={top:c.of.pageY,left:c.of.pageX}}else{j=g.outerWidth();o=g.outerHeight();n=g.offset()}a.each(["my","at"],function(){var k=(c[this]||"").split(" ");if(k.length===1)k=e.test(k[0])?k.concat(["center"]):b.test(k[0])?["center"].concat(k):["center","center"];k[0]=e.test(k[0])?k[0]:"center";k[1]=b.test(k[1])?k[1]:"center";c[this]=k});if(h.length===1)h[1]=h[0];i[0]=parseInt(i[0],10)||0;if(i.length===1)i[1]=i[0];i[1]=parseInt(i[1],10)||0;if(c.at[0]==="right")n.left+=j;else if(c.at[0]==="center")n.left+=
j/2;if(c.at[1]==="bottom")n.top+=o;else if(c.at[1]==="center")n.top+=o/2;n.left+=i[0];n.top+=i[1];return this.each(function(){var k=a(this),l=k.outerWidth(),m=k.outerHeight(),p=a.extend({},n);if(c.my[0]==="right")p.left-=l;else if(c.my[0]==="center")p.left-=l/2;if(c.my[1]==="bottom")p.top-=m;else if(c.my[1]==="center")p.top-=m/2;p.left=parseInt(p.left);p.top=parseInt(p.top);a.each(["left","top"],function(w,v){a.ui.position[h[w]]&&a.ui.position[h[w]][v](p,{targetWidth:j,targetHeight:o,elemWidth:l,
elemHeight:m,offset:i,my:c.my,at:c.at})});a.fn.bgiframe&&k.bgiframe();k.offset(a.extend(p,{using:c.using}))})};a.ui.position={fit:{left:function(c,g){var h=a(window);h=c.left+g.elemWidth-h.width()-h.scrollLeft();c.left=h>0?c.left-h:Math.max(0,c.left)},top:function(c,g){var h=a(window);h=c.top+g.elemHeight-h.height()-h.scrollTop();c.top=h>0?c.top-h:Math.max(0,c.top)}},flip:{left:function(c,g){if(g.at[0]!=="center"){var h=a(window);h=c.left+g.elemWidth-h.width()-h.scrollLeft();var i=g.my[0]==="left"?
-g.elemWidth:g.my[0]==="right"?g.elemWidth:0,j=-2*g.offset[0];c.left+=c.left<0?i+g.targetWidth+j:h>0?i-g.targetWidth+j:0}},top:function(c,g){if(g.at[1]!=="center"){var h=a(window);h=c.top+g.elemHeight-h.height()-h.scrollTop();var i=g.my[1]==="top"?-g.elemHeight:g.my[1]==="bottom"?g.elemHeight:0,j=g.at[1]==="top"?g.targetHeight:-g.targetHeight,o=-2*g.offset[1];c.top+=c.top<0?i+g.targetHeight+o:h>0?i+j+o:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(c,g){if(/static/.test(a.curCSS(c,"position")))c.style.position=
"relative";var h=a(c),i=h.offset(),j=parseInt(a.curCSS(c,"top",true),10)||0,o=parseInt(a.curCSS(c,"left",true),10)||0;i={top:g.top-i.top+j,left:g.left-i.left+o};"using"in g?g.using.call(c,i):h.css(i)};a.fn.offset=function(c){var g=this[0];if(!g||!g.ownerDocument)return null;if(c)return this.each(function(){a.offset.setOffset(this,c)});return f.call(this)}}})(jQuery);window.freebase=window.fb={};
(function(a,e){e.dispatch=function(b,d,f,c){if(typeof d!=="function")return false;b=a.event.fix(b||window.event);f||(f=[]);c||(c=this);return d.apply(c,[b].concat(f))}})(jQuery,window.freebase);
(function(a,e){function b(g,h){var i=g.indexOf("|"+h+"_");if(i!=-1){i=i+2+h.length;var j=g.indexOf("|",i);if(j!=-1)return decodeURIComponent(g.substr(i,j-i))}return null}var d=a.cookie("metaweb-user-info");if(d){var f=b(d,"g"),c=b(d,"u");(d=b(d,"p"))||(d="/user/"+this.name);e.user={guid:f,name:c,id:d}}if(e.user){f=a("#nav-username a:first");if(f.length){f[0].href+=e.user.id;f.text(e.user.name)}a("#signedin").show()}else a("#signedout").show()})(jQuery,window.freebase);
(function(a){a(function(){var e=a("#SearchBox .SearchBox-input,#global-search-input"),b=acre.freebase.site_host;e.suggest({service_url:b,soft:true,category:"object",parent:"#site-search-box",align:"right",status:null});var d=a("#site-search-label"),f=a("#site-search-box .fbs-pane");e.bind("fb-select",function(c,g){window.location=b+"/view"+g.id;return false}).bind("fb-pane-show",function(){d.html("<span>Select an item from the list</span>").removeClass("loading")}).bind("fb-textchange",function(){a.trim(e.val())===
""?d.html("<span>Start typing to get some suggestions</span>").removeClass("loading"):d.html("<span>Searching...</span>").addClass("loading")}).bind("fb-error",function(){d.html("<span>Sorry, something went wrong. Please try again later</span>").removeClass("loading")}).focus(function(){d.is(":visible")||a("#site-search-label").slideDown("fast")}).blur(function(){!f.is(":visible")&&d.is(":visible")&&a("#site-search-label").slideUp("fast")});a(".SearchBox-form").submit(function(){return a.trim(a("#global-search-input").val()).length==
0?false:true});a("input, textarea").textPlaceholder()})})(jQuery,window.freebase);
(function(a){function e(f,c,g){var h=this,i=f.add(this),j=f.find(g.tabs),o=c.jquery?c:f.children(c),n;j.length||(j=f.children());o.length||(o=f.parent().find(c));o.length||(o=a(c));a.extend(this,{click:function(k,l){var m=j.eq(k);if(typeof k=="string"&&k.replace("#","")){m=j.filter("[href*="+k.replace("#","")+"]");k=Math.max(j.index(m),0)}if(g.rotate){var p=j.length-1;if(k<0)return h.click(p,l);if(k>p)return h.click(0,l)}if(!m.length){if(n>=0)return h;k=g.initialIndex;m=j.eq(k)}if(k===n)return h;
l=l||a.Event();l.type="onBeforeClick";i.trigger(l,[k]);if(!l.isDefaultPrevented()){b[g.effect].call(h,k,function(){l.type="onClick";i.trigger(l,[k])});n=k;j.removeClass(g.current);m.addClass(g.current);return h}},getConf:function(){return g},getTabs:function(){return j},getPanes:function(){return o},getCurrentPane:function(){return o.eq(n)},getCurrentTab:function(){return j.eq(n)},getIndex:function(){return n},next:function(){return h.click(n+1)},prev:function(){return h.click(n-1)},destroy:function(){j.unbind(g.event).removeClass(g.current);
o.find("a[href^=#]").unbind("click.T");return h}});a.each("onBeforeClick,onClick".split(","),function(k,l){a.isFunction(g[l])&&a(h).bind(l,g[l]);h[l]=function(m){a(h).bind(l,m);return h}});if(g.history&&a.fn.history){a.tools.history.init(j);g.event="history"}j.each(function(k){a(this).bind(g.event,function(l){h.click(k,l);return l.preventDefault()})});o.find("a[href^=#]").bind("click.T",function(k){h.click(a(this).attr("href"),k)});if(location.hash)h.click(location.hash);else if(g.initialIndex===
0||g.initialIndex>0)h.click(g.initialIndex)}a.tools=a.tools||{version:"@VERSION"};a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:false,history:false},addEffect:function(f,c){b[f]=c}};var b={"default":function(f,c){this.getPanes().hide().eq(f).show();c.call()},fade:function(f,c){var g=this.getConf(),h=g.fadeOutSpeed,i=this.getPanes();h?i.fadeOut(h):i.hide();i.eq(f).fadeIn(g.fadeInSpeed,c)},slide:function(f,c){this.getPanes().slideUp(200);
this.getPanes().eq(f).slideDown(400,c)},ajax:function(f,c){this.getPanes().eq(0).load(this.getTabs().eq(f).attr("href"),c)}},d;a.tools.tabs.addEffect("horizontal",function(f,c){d||(d=this.getPanes().eq(0).width());this.getCurrentPane().animate({width:0},function(){a(this).hide()});this.getPanes().eq(f).animate({width:d},function(){a(this).show();c.call()})});a.fn.tabs=function(f,c){var g=this.data("tabs");if(g){g.destroy();this.removeData("tabs")}if(a.isFunction(c))c={onBeforeClick:c};c=a.extend({},
a.tools.tabs.conf,c);this.each(function(){g=new e(a(this),f,c);a(this).data("tabs",g)});return c.api?g:this}})(jQuery);
(function(a){function e(){a.fn.ajaxSubmit.debug&&window.console&&window.console.log&&window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}a.fn.ajaxSubmit=function(b){function d(){function n(){if(!z++){t.detachEvent?t.detachEvent("onload",n):t.removeEventListener("load",n,false);var u=true;try{if(A)throw"timeout";var s,r;r=t.contentWindow?t.contentWindow.document:t.contentDocument?t.contentDocument:t.document;var x=m.dataType=="xml"||r.XMLDocument||a.isXMLDoc(r);e("isXml="+
x);if(!x&&(r.body==null||r.body.innerHTML=="")){if(--E){z=0;setTimeout(n,100);return}e("Could not access iframe DOM after 50 tries.");return}q.responseText=r.body?r.body.innerHTML:null;q.responseXML=r.XMLDocument?r.XMLDocument:r;q.getResponseHeader=function(F){return{"content-type":m.dataType}[F]};if(m.dataType=="json"||m.dataType=="script"){var B=r.getElementsByTagName("textarea")[0];if(B)q.responseText=B.value;else{var C=r.getElementsByTagName("pre")[0];if(C)q.responseText=C.innerHTML}}else if(m.dataType==
"xml"&&!q.responseXML&&q.responseText!=null)q.responseXML=k(q.responseText);s=a.httpData(q,m.dataType)}catch(G){u=false;a.handleError(m,q,"error",G)}if(u){m.success(s,"success");y&&a.event.trigger("ajaxSuccess",[q,m])}y&&a.event.trigger("ajaxComplete",[q,m]);y&&!--a.active&&a.event.trigger("ajaxStop");if(m.complete)m.complete(q,u?"success":"error");setTimeout(function(){v.remove();q.responseXML=null},100)}}function k(u,s){if(window.ActiveXObject){s=new ActiveXObject("Microsoft.XMLDOM");s.async="false";
s.loadXML(u)}else s=(new DOMParser).parseFromString(u,"text/xml");return s&&s.documentElement&&s.documentElement.tagName!="parsererror"?s:null}var l=i[0];if(a(":input[name=submit]",l).length)alert('Error: Form elements must not be named "submit".');else{var m=a.extend({},a.ajaxSettings,b),p=a.extend(true,{},a.extend(true,{},a.ajaxSettings),m),w="jqFormIO"+(new Date).getTime(),v=a('<iframe id="'+w+'" name="'+w+'" src="'+m.iframeSrc+'" />'),t=v[0];v.css({position:"absolute",top:"-1000px",left:"-1000px"});
var q={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;v.attr("src",m.iframeSrc)}},y=m.global;y&&!a.active++&&a.event.trigger("ajaxStart");y&&a.event.trigger("ajaxSend",[q,m]);if(p.beforeSend&&p.beforeSend(q,p)===false)p.global&&a.active--;else if(!q.aborted){var z=0,A=0;if(p=l.clk){var D=p.name;if(D&&!p.disabled){b.extraData=b.extraData||{};b.extraData[D]=
p.value;if(p.type=="image"){b.extraData[name+".x"]=l.clk_x;b.extraData[name+".y"]=l.clk_y}}}setTimeout(function(){var u=i.attr("target"),s=i.attr("action");l.setAttribute("target",w);l.getAttribute("method")!="POST"&&l.setAttribute("method","POST");l.getAttribute("action")!=m.url&&l.setAttribute("action",m.url);b.skipEncodingOverride||i.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});m.timeout&&setTimeout(function(){A=true;n()},m.timeout);var r=[];try{if(b.extraData)for(var x in b.extraData)r.push(a('<input type="hidden" name="'+
x+'" value="'+b.extraData[x]+'" />').appendTo(l)[0]);v.appendTo("body");t.attachEvent?t.attachEvent("onload",n):t.addEventListener("load",n,false);l.submit()}finally{l.setAttribute("action",s);u?l.setAttribute("target",u):i.removeAttr("target");a(r).remove()}},10);var E=50}}}if(!this.length){e("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof b=="function")b={success:b};var f=a.trim(this.attr("action"));if(f)f=(f.match(/^([^#]+)/)||[])[1];f=f||window.location.href||
"";b=a.extend({url:f,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b||{});f={};this.trigger("form-pre-serialize",[this,b,f]);if(f.veto){e("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(b.beforeSerialize&&b.beforeSerialize(this,b)===false){e("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var c=this.formToArray(b.semantic);if(b.data){b.extraData=b.data;for(var g in b.data)if(b.data[g]instanceof
Array)for(var h in b.data[g])c.push({name:g,value:b.data[g][h]});else c.push({name:g,value:b.data[g]})}if(b.beforeSubmit&&b.beforeSubmit(c,this,b)===false){e("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[c,this,b,f]);if(f.veto){e("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}g=a.param(c);if(b.type.toUpperCase()=="GET"){b.url+=(b.url.indexOf("?")>=0?"&":"?")+g;b.data=null}else b.data=g;var i=this,j=[];b.resetForm&&
j.push(function(){i.resetForm()});b.clearForm&&j.push(function(){i.clearForm()});if(!b.dataType&&b.target){var o=b.success||function(){};j.push(function(n){a(b.target).html(n).each(o,arguments)})}else b.success&&j.push(b.success);b.success=function(n,k){for(var l=0,m=j.length;l<m;l++)j[l].apply(b,[n,k,i])};g=a("input:file",this).fieldValue();h=false;for(f=0;f<g.length;f++)if(g[f])h=true;if(g.length&&b.iframe!==false||b.iframe||h||0)b.closeKeepAlive?a.get(b.closeKeepAlive,d):d();else a.ajax(b);this.trigger("form-submit-notify",
[this,b]);return this};a.fn.ajaxForm=function(b){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){a(this).ajaxSubmit(b);return false}).bind("click.form-plugin",function(d){var f=d.target,c=a(f);if(!c.is(":submit,input:image")){f=c.closest(":submit");if(f.length==0)return;f=f[0]}var g=this;g.clk=f;if(f.type=="image")if(d.offsetX!=undefined){g.clk_x=d.offsetX;g.clk_y=d.offsetY}else if(typeof a.fn.offset=="function"){c=c.offset();g.clk_x=d.pageX-c.left;g.clk_y=d.pageY-c.top}else{g.clk_x=
d.pageX-f.offsetLeft;g.clk_y=d.pageY-f.offsetTop}setTimeout(function(){g.clk=g.clk_x=g.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var d=[];if(this.length==0)return d;var f=this[0],c=b?f.getElementsByTagName("*"):f.elements;if(!c)return d;for(var g=0,h=c.length;g<h;g++){var i=c[g],j=i.name;if(j)if(b&&f.clk&&i.type=="image"){if(!i.disabled&&f.clk==i){d.push({name:j,value:a(i).val()});d.push({name:j+".x",
value:f.clk_x},{name:j+".y",value:f.clk_y})}}else if((i=a.fieldValue(i,true))&&i.constructor==Array)for(var o=0,n=i.length;o<n;o++)d.push({name:j,value:i[o]});else i!==null&&typeof i!="undefined"&&d.push({name:j,value:i})}if(!b&&f.clk){b=a(f.clk);c=b[0];if((j=c.name)&&!c.disabled&&c.type=="image"){d.push({name:j,value:b.val()});d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y})}}return d};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var d=
[];this.each(function(){var f=this.name;if(f){var c=a.fieldValue(this,b);if(c&&c.constructor==Array)for(var g=0,h=c.length;g<h;g++)d.push({name:f,value:c[g]});else c!==null&&typeof c!="undefined"&&d.push({name:this.name,value:c})}});return a.param(d)};a.fn.fieldValue=function(b){for(var d=[],f=0,c=this.length;f<c;f++){var g=a.fieldValue(this[f],b);g===null||typeof g=="undefined"||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(d,g):d.push(g))}return d};a.fieldValue=function(b,d){var f=
b.name,c=b.type,g=b.tagName.toLowerCase();if(typeof d=="undefined")d=true;if(d&&(!f||b.disabled||c=="reset"||c=="button"||(c=="checkbox"||c=="radio")&&!b.checked||(c=="submit"||c=="image")&&b.form&&b.form.clk!=b||g=="select"&&b.selectedIndex==-1))return null;if(g=="select"){var h=b.selectedIndex;if(h<0)return null;f=[];g=b.options;var i=(c=c=="select-one")?h+1:g.length;for(h=c?h:0;h<i;h++){var j=g[h];if(j.selected){var o=j.value;o||(o=j.attributes&&j.attributes.value&&!j.attributes.value.specified?
j.text:j.value);if(c)return o;f.push(o)}}return f}return b.value};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var b=this.type,d=this.tagName.toLowerCase();if(b=="text"||b=="password"||d=="textarea")this.value="";else if(b=="checkbox"||b=="radio")this.checked=false;else if(d=="select")this.selectedIndex=-1})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset==
"function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};a.fn.enable=function(b){if(b==undefined)b=true;return this.each(function(){this.disabled=!b})};a.fn.selected=function(b){if(b==undefined)b=true;return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio")this.checked=b;else if(this.tagName.toLowerCase()=="option"){d=a(this).parent("select");b&&d[0]&&d[0].type=="select-one"&&d.find("option").selected(false);this.selected=b}})}})(jQuery);
$(function(){$("#apps-search > .section-tabset").tabs("#apps-search > .search-box");$("#user-search-input").closest("form").submit(function(){return false});$("#user-search-input").suggest({type:"/type/user"}).bind("fb-select",function(a,e){location.href=bp+e.id}).focus(function(){this.select()});$("#create-link").click(function(){$.post(bp+"/post/submit/create_app",null,function(a){window.location=bp+"/admin"+a.result},"json");return false});$("#edit-props").ajaxForm({dataType:"json",success:function(a){if(a.code==
"/api/status/ok")window.location.href=bp+a.result.appid;else alert("Error updating listing")}});$("#icon_form").ajaxForm({dataType:"json",beforeSubmit:function(a,e,b){b.url+="?appid="+app.id+"&name="+$("#icon_file").val()},success:function(a){if(a.code==="/api/status/ok"){app.icon=a.result;$("#icon_name").text(a.result.name);$("#icon_delete").text("delete");$("#icon_file").val("")}else if(a.messages&&a.messages[0]&&a.messages[0].message){console.log(a);alert(a.messages[0].message)}else alert("Error uploading")}});
$("#icon_file").change(function(){$("#icon_upload_error").text("");$("#icon_form").submit()});$("#icon_delete").click(function(){$.post(bp+"/post/submit/delete_icon",{appid:app.id,iconid:app.icon.id},function(){$("#icon_name").text("No icon");$("#icon_delete").text("")},"json");return false})});
