/*
 
 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE 
*/
jQuery.cookie=function(a,d,b){if(typeof d!="undefined"){b=b||{};if(d===null){d="";b=$.extend({},b);b.expires=-1}var e="";if(b.expires&&(typeof b.expires=="number"||b.expires.toUTCString)){if(typeof b.expires=="number"){e=new Date;e.setTime(e.getTime()+b.expires*24*60*60*1E3)}else e=b.expires;e="; expires="+e.toUTCString()}var g=b.path?"; path="+b.path:"",c=b.domain?"; domain="+b.domain:"";b=b.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(d),e,g,c,b].join("")}else{d=null;if(document.cookie&&
document.cookie!=""){b=document.cookie.split(";");for(e=0;e<b.length;e++){g=jQuery.trim(b[e]);if(g.substring(0,a.length+1)==a+"="){d=decodeURIComponent(g.substring(a.length+1));break}}}return d}};
jQuery.fn.textPlaceholder=function(a){a=a||"#AAA";return this.each(function(){var d=this;if(!(d.placeholder&&"placeholder"in document.createElement(d.tagName))){var b=d.style.color,e=d.getAttribute("placeholder"),g=$(d);if(d.value===""||d.value==e){d.value=e;d.style.color=a;g.data("placeholder-visible",true)}g.focus(function(){this.style.color=b;if(g.data("placeholder-visible")){g.data("placeholder-visible",false);this.value=""}});g.blur(function(){if(this.value===""){g.data("placeholder-visible",
true);this.value=e;this.style.color=a}else{this.style.color=b;g.data("placeholder-visible",false)}});d.form&&$(d.form).submit(function(){if(g.data("placeholder-visible"))d.value=""})}})};
(function(a){a.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(d,b){this.defaults.type=d;this.defaults.name=b},get:function(d,b){var e=a.extend({},this.defaults,b);if(!e.single.length)e.single="metadata";var g=a.data(d,e.single);if(g)return g;g="{}";var c=function(i){if(typeof i!="string")return i;return i=eval("("+i+")")};if(e.type=="html5"){var f={};a(d.attributes).each(function(){var i=this.nodeName;if(i.match(/^data-/))i=i.replace(/^data-/,
"");else return true;f[i]=c(this.nodeValue)})}else{if(e.type=="class"){var h=e.cre.exec(d.className);if(h)g=h[1]}else if(e.type=="elem"){if(!d.getElementsByTagName)return;h=d.getElementsByTagName(e.name);if(h.length)g=a.trim(h[0].innerHTML)}else if(d.getAttribute!=undefined)if(h=d.getAttribute(e.name))g=h;f=c(g.indexOf("{")<0?"{"+g+"}":g)}a.data(d,e.single,f);return f}}});a.fn.metadata=function(d){return a.metadata.get(this[0],d)}})(jQuery);
(function(a){a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.2",plugin:{add:function(d,b,e){d=a.ui[d].prototype;for(var g in e){d.plugins[g]=d.plugins[g]||[];d.plugins[g].push([b,e[g]])}},call:function(d,b,e){if((b=d.plugins[b])&&d.element[0].parentNode)for(var g=0;g<b.length;g++)d.options[b[g][0]]&&b[g][1].apply(d.element,e)}},contains:function(d,b){return document.compareDocumentPosition?d.compareDocumentPosition(b)&16:d!==b&&d.contains(b)},hasScroll:function(d,b){if(a(d).css("overflow")==
"hidden")return false;var e=b&&b=="left"?"scrollLeft":"scrollTop",g=false;if(d[e]>0)return true;d[e]=1;g=d[e]>0;d[e]=0;return g},isOverAxis:function(d,b,e){return d>b&&d<b+e},isOver:function(d,b,e,g,c,f){return a.ui.isOverAxis(d,e,c)&&a.ui.isOverAxis(b,g,f)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(d,b){return typeof d==="number"?this.each(function(){var e=this;setTimeout(function(){a(e).focus();b&&b.call(e)},d)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect",
"none")},scrollParent:function(){var d;d=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",
1))}).eq(0);return/fixed/.test(this.css("position"))||!d.length?a(document):d},zIndex:function(d){if(d!==undefined)return this.css("zIndex",d);if(this.length){d=a(this[0]);for(var b;d.length&&d[0]!==document;){b=d.css("position");if(b=="absolute"||b=="relative"||b=="fixed"){b=parseInt(d.css("zIndex"));if(!isNaN(b)&&b!=0)return b}d=d.parent()}}return 0}});a.extend(a.expr[":"],{data:function(d,b,e){return!!a.data(d,e[3])},focusable:function(d){var b=d.nodeName.toLowerCase(),e=a.attr(d,"tabindex");return(/input|select|textarea|button|object/.test(b)?
!d.disabled:"a"==b||"area"==b?d.href||!isNaN(e):!isNaN(e))&&!a(d)["area"==b?"parents":"closest"](":hidden").length},tabbable:function(d){var b=a.attr(d,"tabindex");return(isNaN(b)||b>=0)&&a(d).is(":focusable")}})}})(jQuery);
(function(a){var d=a.fn.remove;a.fn.remove=function(b,e){return this.each(function(){if(!e)if(!b||a.filter(b,[this]).length)a("*",this).add(this).each(function(){a(this).triggerHandler("remove")});return d.call(a(this),b,e)})};a.widget=function(b,e,g){var c=b.split(".")[0],f;b=b.split(".")[1];f=c+"-"+b;if(!g){g=e;e=a.Widget}a.expr[":"][f]=function(h){return!!a.data(h,b)};a[c]=a[c]||{};a[c][b]=function(h,i){arguments.length&&this._createWidget(h,i)};e=new e;e.options=a.extend({},e.options);a[c][b].prototype=
a.extend(true,e,{namespace:c,widgetName:b,widgetEventPrefix:a[c][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},g);a.widget.bridge(b,a[c][b])};a.widget.bridge=function(b,e){a.fn[b]=function(g){var c=typeof g==="string",f=Array.prototype.slice.call(arguments,1),h=this;g=!c&&f.length?a.extend.apply(null,[true,g].concat(f)):g;if(c&&g.substring(0,1)==="_")return h;c?this.each(function(){var i=a.data(this,b),j=i&&a.isFunction(i[g])?i[g].apply(i,f):i;if(j!==i&&j!==undefined){h=j;return false}}):this.each(function(){var i=
a.data(this,b);if(i){g&&i.option(g);i._init()}else a.data(this,b,new e(g,this))});return h}};a.Widget=function(b,e){arguments.length&&this._createWidget(b,e)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,e){this.element=a(e).data(this.widgetName,this);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(e)[this.widgetName],b);var g=this;this.element.bind("remove."+this.widgetName,function(){g.destroy()});this._create();
this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,e){var g=b,c=this;if(arguments.length===0)return a.extend({},c.options);if(typeof b==="string"){if(e===undefined)return this.options[b];g={};g[b]=e}a.each(g,function(f,
h){c._setOption(f,h)});return c},_setOption:function(b,e){this.options[b]=e;if(b==="disabled")this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,e,g){var c=this.options[b];e=a.Event(e);e.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();g=g||{};if(e.originalEvent){b=
a.event.props.length;for(var f;b;){f=a.event.props[--b];e[f]=e.originalEvent[f]}}this.element.trigger(e,g);return!(a.isFunction(c)&&c.call(this.element[0],e,g)===false||e.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(b){return d._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(d._preventClickEvent){d._preventClickEvent=false;b.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(d){d.originalEvent=d.originalEvent||{};if(!d.originalEvent.mouseHandled){this._mouseStarted&&
this._mouseUp(d);this._mouseDownEvent=d;var b=this,e=d.which==1,g=typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false;if(!e||g||!this._mouseCapture(d))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=this._mouseStart(d)!==false;if(!this._mouseStarted){d.preventDefault();
return true}}this._mouseMoveDelegate=function(c){return b._mouseMove(c)};this._mouseUpDelegate=function(c){return b._mouseUp(c)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||d.preventDefault();return d.originalEvent.mouseHandled=true}},_mouseMove:function(d){if(a.browser.msie&&!d.button)return this._mouseUp(d);if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&
this._mouseDelayMet(d))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==false)?this._mouseDrag(d):this._mouseUp(d);return!this._mouseStarted},_mouseUp:function(d){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=d.target==this._mouseDownEvent.target;this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-
d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var d=/left|center|right/,b=/top|center|bottom/,e=a.fn.position,g=a.fn.offset;a.fn.position=function(c){if(!c||!c.of)return e.apply(this,arguments);c=a.extend({},c);var f=a(c.of),h=(c.collision||"flip").split(" "),i=c.offset?c.offset.split(" "):[0,0],j,m,n;if(c.of.nodeType===9){j=f.width();m=f.height();n={top:0,left:0}}else if(c.of.scrollTo&&c.of.document){j=f.width();m=f.height();n={top:f.scrollTop(),left:f.scrollLeft()}}else if(c.of.preventDefault){c.at="left top";j=m=
0;n={top:c.of.pageY,left:c.of.pageX}}else{j=f.outerWidth();m=f.outerHeight();n=f.offset()}a.each(["my","at"],function(){var l=(c[this]||"").split(" ");if(l.length===1)l=d.test(l[0])?l.concat(["center"]):b.test(l[0])?["center"].concat(l):["center","center"];l[0]=d.test(l[0])?l[0]:"center";l[1]=b.test(l[1])?l[1]:"center";c[this]=l});if(h.length===1)h[1]=h[0];i[0]=parseInt(i[0],10)||0;if(i.length===1)i[1]=i[0];i[1]=parseInt(i[1],10)||0;if(c.at[0]==="right")n.left+=j;else if(c.at[0]==="center")n.left+=
j/2;if(c.at[1]==="bottom")n.top+=m;else if(c.at[1]==="center")n.top+=m/2;n.left+=i[0];n.top+=i[1];return this.each(function(){var l=a(this),p=l.outerWidth(),o=l.outerHeight(),k=a.extend({},n);if(c.my[0]==="right")k.left-=p;else if(c.my[0]==="center")k.left-=p/2;if(c.my[1]==="bottom")k.top-=o;else if(c.my[1]==="center")k.top-=o/2;k.left=parseInt(k.left);k.top=parseInt(k.top);a.each(["left","top"],function(t,w){a.ui.position[h[t]]&&a.ui.position[h[t]][w](k,{targetWidth:j,targetHeight:m,elemWidth:p,
elemHeight:o,offset:i,my:c.my,at:c.at})});a.fn.bgiframe&&l.bgiframe();l.offset(a.extend(k,{using:c.using}))})};a.ui.position={fit:{left:function(c,f){var h=a(window);h=c.left+f.elemWidth-h.width()-h.scrollLeft();c.left=h>0?c.left-h:Math.max(0,c.left)},top:function(c,f){var h=a(window);h=c.top+f.elemHeight-h.height()-h.scrollTop();c.top=h>0?c.top-h:Math.max(0,c.top)}},flip:{left:function(c,f){if(f.at[0]!=="center"){var h=a(window);h=c.left+f.elemWidth-h.width()-h.scrollLeft();var i=f.my[0]==="left"?
-f.elemWidth:f.my[0]==="right"?f.elemWidth:0,j=-2*f.offset[0];c.left+=c.left<0?i+f.targetWidth+j:h>0?i-f.targetWidth+j:0}},top:function(c,f){if(f.at[1]!=="center"){var h=a(window);h=c.top+f.elemHeight-h.height()-h.scrollTop();var i=f.my[1]==="top"?-f.elemHeight:f.my[1]==="bottom"?f.elemHeight:0,j=f.at[1]==="top"?f.targetHeight:-f.targetHeight,m=-2*f.offset[1];c.top+=c.top<0?i+f.targetHeight+m:h>0?i+j+m:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(c,f){if(/static/.test(a.curCSS(c,"position")))c.style.position=
"relative";var h=a(c),i=h.offset(),j=parseInt(a.curCSS(c,"top",true),10)||0,m=parseInt(a.curCSS(c,"left",true),10)||0;i={top:f.top-i.top+j,left:f.left-i.left+m};"using"in f?f.using.call(c,i):h.css(i)};a.fn.offset=function(c){var f=this[0];if(!f||!f.ownerDocument)return null;if(c)return this.each(function(){a.offset.setOffset(this,c)});return g.call(this)}}})(jQuery);window.freebase=window.fb={};
(function(a){if(!window.console)window.console={log:a.noop,info:a.noop,debug:a.noop,warn:a.noop,error:a.noop}})(jQuery,window.freebase);(function(a,d){d.dispatch=function(b,e,g,c){if(typeof e!=="function")return false;b=a.event.fix(b||window.event);g||(g=[]);c||(c=this);return e.apply(c,[b].concat(g))}})(jQuery,window.freebase);
(function(a,d){var b={};d.get_script=function(e,g){var c=b[e];if(c)if(c.state===1)c.callbacks.push(g);else c.state===4&&g();else{c=b[e]={state:0,callbacks:[g]};a.ajax({url:e,dataType:"script",beforeSend:function(){c.state=1},success:function(){c.state=4;a.each(c.callbacks,function(f,h){h()})},error:function(){c.state=-1}})}}})(jQuery,window.freebase);
(function(a,d){a(window).bind("fb.user.signedin",function(f,h){console.log("fb.user.signnedin");d.user=h;var i=a("#nav-username a:first");if(i.length){i[0].href+=d.user.id;i.text(d.user.name)}a("#signedin").show()}).bind("fb.user.signedout",function(){console.log("fb.user.signedout");a("#signedout").show()});if(/^https?\:\/\/((.+)\.)?(freebase|sandbox\-freebase|branch\.qa\.metaweb|trunk\.qa\.metaweb)\.com(\:\d+)?/.test(acre.request.app_url)){var b=function(f,h){var i=f.indexOf("|"+h+"_");if(i!=-1){i=
i+2+h.length;var j=f.indexOf("|",i);if(j!=-1)return decodeURIComponent(f.substr(i,j-i))}return null},e=a.cookie("metaweb-user-info");if(e){var g=b(e,"g"),c=b(e,"u");(b=b(e,"p"))||(b="/user/"+this.name);a(window).trigger("fb.user.signedin",{guid:g,name:c,id:b})}else a(window).trigger("fb.user.signedout")}else a.ajax({url:"/acre/account/user_info",dataType:"json",success:function(f){f&&f.code==="/api/status/ok"?a(window).trigger("fb.user.signedin",{id:f.id,guid:f.guid,name:f.username}):a(window).trigger("fb.user.signedout")},
error:function(){a(window).trigger("fb.user.signedout")}})})(jQuery,window.freebase);
(function(a){a(function(){var d=a("#SearchBox .SearchBox-input,#global-search-input"),b=acre.freebase.site_host;d.suggest({service_url:b,soft:true,category:"object",parent:"#site-search-box",align:"right",status:null});var e=a("#site-search-label"),g=a("#site-search-box .fbs-pane");d.bind("fb-select",function(c,f){window.location=b+"/view"+f.id;return false}).bind("fb-pane-show",function(){e.html("<span>Select an item from the list</span>").removeClass("loading")}).bind("fb-textchange",function(){a.trim(d.val())===
""?e.html("<span>Start typing to get some suggestions</span>").removeClass("loading"):e.html("<span>Searching...</span>").addClass("loading")}).bind("fb-error",function(){e.html("<span>Sorry, something went wrong. Please try again later</span>").removeClass("loading")}).focus(function(){e.is(":visible")||a("#site-search-label").slideDown("fast")}).blur(function(){!g.is(":visible")&&e.is(":visible")&&a("#site-search-label").slideUp("fast")});a(".SearchBox-form").submit(function(){return a.trim(a("#global-search-input").val()).length==
0?false:true});a("input, textarea").textPlaceholder()})})(jQuery,window.freebase);
(function(a){function d(g,c,f){var h=this,i=g.add(this),j=g.find(f.tabs),m=c.jquery?c:g.children(c),n;j.length||(j=g.children());m.length||(m=g.parent().find(c));m.length||(m=a(c));a.extend(this,{click:function(l,p){var o=j.eq(l);if(typeof l=="string"&&l.replace("#","")){o=j.filter("[href*="+l.replace("#","")+"]");l=Math.max(j.index(o),0)}if(f.rotate){var k=j.length-1;if(l<0)return h.click(k,p);if(l>k)return h.click(0,p)}if(!o.length){if(n>=0)return h;l=f.initialIndex;o=j.eq(l)}if(l===n)return h;
p=p||a.Event();p.type="onBeforeClick";i.trigger(p,[l]);if(!p.isDefaultPrevented()){b[f.effect].call(h,l,function(){p.type="onClick";i.trigger(p,[l])});n=l;j.removeClass(f.current);o.addClass(f.current);return h}},getConf:function(){return f},getTabs:function(){return j},getPanes:function(){return m},getCurrentPane:function(){return m.eq(n)},getCurrentTab:function(){return j.eq(n)},getIndex:function(){return n},next:function(){return h.click(n+1)},prev:function(){return h.click(n-1)},destroy:function(){j.unbind(f.event).removeClass(f.current);
m.find("a[href^=#]").unbind("click.T");return h}});a.each("onBeforeClick,onClick".split(","),function(l,p){a.isFunction(f[p])&&a(h).bind(p,f[p]);h[p]=function(o){a(h).bind(p,o);return h}});if(f.history&&a.fn.history){a.tools.history.init(j);f.event="history"}j.each(function(l){a(this).bind(f.event,function(p){h.click(l,p);return p.preventDefault()})});m.find("a[href^=#]").bind("click.T",function(l){h.click(a(this).attr("href"),l)});if(location.hash)h.click(location.hash);else if(f.initialIndex===
0||f.initialIndex>0)h.click(f.initialIndex)}a.tools=a.tools||{version:"@VERSION"};a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:false,history:false},addEffect:function(g,c){b[g]=c}};var b={"default":function(g,c){this.getPanes().hide().eq(g).show();c.call()},fade:function(g,c){var f=this.getConf(),h=f.fadeOutSpeed,i=this.getPanes();h?i.fadeOut(h):i.hide();i.eq(g).fadeIn(f.fadeInSpeed,c)},slide:function(g,c){this.getPanes().slideUp(200);
this.getPanes().eq(g).slideDown(400,c)},ajax:function(g,c){this.getPanes().eq(0).load(this.getTabs().eq(g).attr("href"),c)}},e;a.tools.tabs.addEffect("horizontal",function(g,c){e||(e=this.getPanes().eq(0).width());this.getCurrentPane().animate({width:0},function(){a(this).hide()});this.getPanes().eq(g).animate({width:e},function(){a(this).show();c.call()})});a.fn.tabs=function(g,c){var f=this.data("tabs");if(f){f.destroy();this.removeData("tabs")}if(a.isFunction(c))c={onBeforeClick:c};c=a.extend({},
a.tools.tabs.conf,c);this.each(function(){f=new d(a(this),g,c);a(this).data("tabs",f)});return c.api?f:this}})(jQuery);
(function(a){function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log)window.console.log(b);else window.opera&&window.opera.postError&&window.opera.postError(b)}}a.fn.ajaxSubmit=function(b){function e(){function n(){var u=i.attr("target"),s=i.attr("action");o.setAttribute("target",w);o.getAttribute("method")!="POST"&&o.setAttribute("method","POST");o.getAttribute("action")!=k.url&&o.setAttribute("action",k.url);k.skipEncodingOverride||
i.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});k.timeout&&setTimeout(function(){C=true;l()},k.timeout);var r=[];try{if(k.extraData)for(var x in k.extraData)r.push(a('<input type="hidden" name="'+x+'" value="'+k.extraData[x]+'" />').appendTo(o)[0]);v.appendTo("body");v.data("form-plugin-onload",l);o.submit()}finally{o.setAttribute("action",s);u?o.setAttribute("target",u):i.removeAttr("target");a(r).remove()}}function l(){if(!D){var u=true;try{if(C)throw"timeout";var s,r;r=y.contentWindow?
y.contentWindow.document:y.contentDocument?y.contentDocument:y.document;var x=k.dataType=="xml"||r.XMLDocument||a.isXMLDoc(r);d("isXml="+x);if(!x&&(r.body==null||r.body.innerHTML=="")){if(--G){d("requeing onLoad callback, DOM not available");setTimeout(l,250);return}d("Could not access iframe DOM after 100 tries.");return}d("response detected");D=true;q.responseText=r.body?r.body.innerHTML:null;q.responseXML=r.XMLDocument?r.XMLDocument:r;q.getResponseHeader=function(H){return{"content-type":k.dataType}[H]};
if(k.dataType=="json"||k.dataType=="script"){var E=r.getElementsByTagName("textarea")[0];if(E)q.responseText=E.value;else{var F=r.getElementsByTagName("pre")[0];if(F)q.responseText=F.innerHTML}}else if(k.dataType=="xml"&&!q.responseXML&&q.responseText!=null)q.responseXML=p(q.responseText);s=a.httpData(q,k.dataType)}catch(B){d("error caught:",B);u=false;q.error=B;a.handleError(k,q,"error",B)}if(u){k.success(s,"success");z&&a.event.trigger("ajaxSuccess",[q,k])}z&&a.event.trigger("ajaxComplete",[q,k]);
z&&!--a.active&&a.event.trigger("ajaxStop");if(k.complete)k.complete(q,u?"success":"error");setTimeout(function(){v.removeData("form-plugin-onload");v.remove();q.responseXML=null},100)}}function p(u,s){if(window.ActiveXObject){s=new ActiveXObject("Microsoft.XMLDOM");s.async="false";s.loadXML(u)}else s=(new DOMParser).parseFromString(u,"text/xml");return s&&s.documentElement&&s.documentElement.tagName!="parsererror"?s:null}var o=i[0];if(a(":input[name=submit]",o).length)alert('Error: Form elements must not be named "submit".');
else{var k=a.extend({},a.ajaxSettings,b),t=a.extend(true,{},a.extend(true,{},a.ajaxSettings),k),w="jqFormIO"+(new Date).getTime(),v=a('<iframe id="'+w+'" name="'+w+'" src="'+k.iframeSrc+'" onload="(jQuery(this).data(\'form-plugin-onload\'))()" />'),y=v[0];v.css({position:"absolute",top:"-1000px",left:"-1000px"});var q={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=
1;v.attr("src",k.iframeSrc)}},z=k.global;z&&!a.active++&&a.event.trigger("ajaxStart");z&&a.event.trigger("ajaxSend",[q,k]);if(t.beforeSend&&t.beforeSend(q,t)===false)t.global&&a.active--;else if(!q.aborted){var D=false,C=0;if(t=o.clk){var A=t.name;if(A&&!t.disabled){k.extraData=k.extraData||{};k.extraData[A]=t.value;if(t.type=="image"){k.extraData[A+".x"]=o.clk_x;k.extraData[A+".y"]=o.clk_y}}}k.forceSync?n():setTimeout(n,10);var G=100}}}if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");
return this}if(typeof b=="function")b={success:b};var g=a.trim(this.attr("action"));if(g)g=(g.match(/^([^#]+)/)||[])[1];g=g||window.location.href||"";b=a.extend({url:g,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b||{});g={};this.trigger("form-pre-serialize",[this,b,g]);if(g.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(b.beforeSerialize&&b.beforeSerialize(this,b)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");
return this}var c=this.formToArray(b.semantic);if(b.data){b.extraData=b.data;for(var f in b.data)if(b.data[f]instanceof Array)for(var h in b.data[f])c.push({name:f,value:b.data[f][h]});else c.push({name:f,value:b.data[f]})}if(b.beforeSubmit&&b.beforeSubmit(c,this,b)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[c,this,b,g]);if(g.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}f=a.param(c);if(b.type.toUpperCase()==
"GET"){b.url+=(b.url.indexOf("?")>=0?"&":"?")+f;b.data=null}else b.data=f;var i=this,j=[];b.resetForm&&j.push(function(){i.resetForm()});b.clearForm&&j.push(function(){i.clearForm()});if(!b.dataType&&b.target){var m=b.success||function(){};j.push(function(n){var l=b.replaceTarget?"replaceWith":"html";a(b.target)[l](n).each(m,arguments)})}else b.success&&j.push(b.success);b.success=function(n,l,p){for(var o=0,k=j.length;o<k;o++)j[o].apply(b,[n,l,p||i,i])};f=a("input:file",this).fieldValue();h=false;
for(g=0;g<f.length;g++)if(f[g])h=true;if(f.length&&b.iframe!==false||b.iframe||h||0)b.closeKeepAlive?a.get(b.closeKeepAlive,e):e();else a.ajax(b);this.trigger("form-submit-notify",[this,b]);return this};a.fn.ajaxForm=function(b){return this.ajaxFormUnbind().bind("submit.form-plugin",function(e){e.preventDefault();a(this).ajaxSubmit(b)}).bind("click.form-plugin",function(e){var g=e.target,c=a(g);if(!c.is(":submit,input:image")){g=c.closest(":submit");if(g.length==0)return;g=g[0]}var f=this;f.clk=g;
if(g.type=="image")if(e.offsetX!=undefined){f.clk_x=e.offsetX;f.clk_y=e.offsetY}else if(typeof a.fn.offset=="function"){c=c.offset();f.clk_x=e.pageX-c.left;f.clk_y=e.pageY-c.top}else{f.clk_x=e.pageX-g.offsetLeft;f.clk_y=e.pageY-g.offsetTop}setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var e=[];if(this.length==0)return e;var g=this[0],c=b?g.getElementsByTagName("*"):g.elements;
if(!c)return e;for(var f=0,h=c.length;f<h;f++){var i=c[f],j=i.name;if(j)if(b&&g.clk&&i.type=="image"){if(!i.disabled&&g.clk==i){e.push({name:j,value:a(i).val()});e.push({name:j+".x",value:g.clk_x},{name:j+".y",value:g.clk_y})}}else if((i=a.fieldValue(i,true))&&i.constructor==Array)for(var m=0,n=i.length;m<n;m++)e.push({name:j,value:i[m]});else i!==null&&typeof i!="undefined"&&e.push({name:j,value:i})}if(!b&&g.clk){b=a(g.clk);c=b[0];if((j=c.name)&&!c.disabled&&c.type=="image"){e.push({name:j,value:b.val()});
e.push({name:j+".x",value:g.clk_x},{name:j+".y",value:g.clk_y})}}return e};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var e=[];this.each(function(){var g=this.name;if(g){var c=a.fieldValue(this,b);if(c&&c.constructor==Array)for(var f=0,h=c.length;f<h;f++)e.push({name:g,value:c[f]});else c!==null&&typeof c!="undefined"&&e.push({name:this.name,value:c})}});return a.param(e)};a.fn.fieldValue=function(b){for(var e=[],g=0,c=this.length;g<c;g++){var f=
a.fieldValue(this[g],b);f===null||typeof f=="undefined"||f.constructor==Array&&!f.length||(f.constructor==Array?a.merge(e,f):e.push(f))}return e};a.fieldValue=function(b,e){var g=b.name,c=b.type,f=b.tagName.toLowerCase();if(typeof e=="undefined")e=true;if(e&&(!g||b.disabled||c=="reset"||c=="button"||(c=="checkbox"||c=="radio")&&!b.checked||(c=="submit"||c=="image")&&b.form&&b.form.clk!=b||f=="select"&&b.selectedIndex==-1))return null;if(f=="select"){var h=b.selectedIndex;if(h<0)return null;g=[];f=
b.options;var i=(c=c=="select-one")?h+1:f.length;for(h=c?h:0;h<i;h++){var j=f[h];if(j.selected){var m=j.value;m||(m=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:j.value);if(c)return m;g.push(m)}}return g}return b.value};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var b=this.type,e=this.tagName.toLowerCase();if(b=="text"||b=="password"||e=="textarea")this.value=
"";else if(b=="checkbox"||b=="radio")this.checked=false;else if(e=="select")this.selectedIndex=-1})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};a.fn.enable=function(b){if(b==undefined)b=true;return this.each(function(){this.disabled=!b})};a.fn.selected=function(b){if(b==undefined)b=true;return this.each(function(){var e=this.type;if(e=="checkbox"||e=="radio")this.checked=b;else if(this.tagName.toLowerCase()==
"option"){e=a(this).parent("select");b&&e[0]&&e[0].type=="select-one"&&e.find("option").selected(false);this.selected=b}})}})(jQuery);
$(function(){$("#apps-search > .section-tabset").tabs("#apps-search > .search-box");$("#user-search-input").closest("form").submit(function(){return false});$("#user-search-input").suggest({type:"/type/user"}).bind("fb-select",function(a,d){location.href=bp+d.id}).focus(function(){this.select()});$("#create-link").click(function(){$.post(bp+"/post/submit/create_app",null,function(a){window.location=bp+"/admin"+a.result},"json");return false});$("#edit-props").ajaxForm({dataType:"json",success:function(a){if(a.code==
"/api/status/ok")window.location.href=bp+a.result.appid;else alert("Error updating listing")}});$("#icon_form").ajaxForm({dataType:"json",beforeSubmit:function(a,d,b){b.url+="?appid="+app.id+"&name="+$("#icon_file").val()},success:function(a){if(a.code==="/api/status/ok"){app.icon=a.result;$("#icon_name").text(a.result.name);$("#icon_delete").text("delete");$("#icon_file").val("")}else if(a.messages&&a.messages[0]&&a.messages[0].message){console.log(a);alert(a.messages[0].message)}else alert("Error uploading")}});
$("#icon_file").change(function(){$("#icon_upload_error").text("");$("#icon_form").submit()});$("#icon_delete").click(function(){$.post(bp+"/post/submit/delete_icon",{appid:app.id,iconid:app.icon.id},function(){$("#icon_name").text("No icon");$("#icon_delete").text("")},"json");return false})});
