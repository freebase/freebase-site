jQuery.cookie=function(a,f,e){if(typeof f!="undefined"){e=e||{};if(f===null){f="";e=$.extend({},e);e.expires=-1}var b="";if(e.expires&&(typeof e.expires=="number"||e.expires.toUTCString)){if(typeof e.expires=="number"){b=new Date;b.setTime(b.getTime()+e.expires*24*60*60*1E3)}else b=e.expires;b="; expires="+b.toUTCString()}var c=e.path?"; path="+e.path:"",d=e.domain?"; domain="+e.domain:"";e=e.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(f),b,c,d,e].join("")}else{f=null;if(document.cookie&&
document.cookie!=""){e=document.cookie.split(";");for(b=0;b<e.length;b++){c=jQuery.trim(e[b]);if(c.substring(0,a.length+1)==a+"="){f=decodeURIComponent(c.substring(a.length+1));break}}}return f}};
jQuery.fn.textPlaceholder=function(a){a=a||"#AAA";return this.each(function(){var f=this;if(!(f.placeholder&&"placeholder"in document.createElement(f.tagName))){var e=f.style.color,b=f.getAttribute("placeholder"),c=$(f);if(f.value===""||f.value==b){f.value=b;f.style.color=a;c.data("placeholder-visible",true)}c.focus(function(){this.style.color=e;if(c.data("placeholder-visible")){c.data("placeholder-visible",false);this.value=""}});c.blur(function(){if(this.value===""){c.data("placeholder-visible",
true);this.value=b;this.style.color=a}else{this.style.color=e;c.data("placeholder-visible",false)}});f.form&&$(f.form).submit(function(){if(c.data("placeholder-visible"))f.value=""})}})};
(function(a){a.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(f,e){this.defaults.type=f;this.defaults.name=e},get:function(f,e){var b=a.extend({},this.defaults,e);if(!b.single.length)b.single="metadata";var c=a.data(f,b.single);if(c)return c;c="{}";var d=function(l){if(typeof l!="string")return l;return l=eval("("+l+")")};if(b.type=="html5"){var g={};a(f.attributes).each(function(){var l=this.nodeName;if(l.match(/^data-/))l=l.replace(/^data-/,
"");else return true;g[l]=d(this.nodeValue)})}else{if(b.type=="class"){var m=b.cre.exec(f.className);if(m)c=m[1]}else if(b.type=="elem"){if(!f.getElementsByTagName)return;m=f.getElementsByTagName(b.name);if(m.length)c=a.trim(m[0].innerHTML)}else if(f.getAttribute!=undefined)if(m=f.getAttribute(b.name))c=m;g=d(c.indexOf("{")<0?"{"+c+"}":c)}a.data(f,b.single,g);return g}}});a.fn.metadata=function(f){return a.metadata.get(this[0],f)}})(jQuery);
(function(a,f){function e(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.4",plugin:{add:function(b,c,d){b=a.ui[b].prototype;for(var g in d){b.plugins[g]=b.plugins[g]||[];b.plugins[g].push([c,d[g]])}},call:function(b,c,d){if((c=b.plugins[c])&&b.element[0].parentNode)for(var g=0;g<c.length;g++)b.options[c[g][0]]&&c[g][1].apply(b.element,d)}},contains:function(b,
c){return document.compareDocumentPosition?b.compareDocumentPosition(c)&16:b!==c&&b.contains(c)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return false;var d=c&&c==="left"?"scrollLeft":"scrollTop",g=false;if(b[d]>0)return true;b[d]=1;g=b[d]>0;b[d]=0;return g},isOverAxis:function(b,c,d){return b>c&&b<c+d},isOver:function(b,c,d,g,m,l){return a.ui.isOverAxis(b,d,m)&&a.ui.isOverAxis(c,g,l)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,
CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus();c&&c.call(d)},b)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable",
"off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,
"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(b){if(b!==f)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var c;b.length&&b[0]!==document;){c=b.css("position");if(c==="absolute"||c==="relative"||c==="fixed"){c=parseInt(b.css("zIndex"));if(!isNaN(c)&&c!=0)return c}b=b.parent()}}return 0}});a.each(["Width","Height"],function(b,c){function d(h,k,n,o){a.each(g,function(){k-=
parseFloat(a.curCSS(h,"padding"+this,true))||0;if(n)k-=parseFloat(a.curCSS(h,"border"+this+"Width",true))||0;if(o)k-=parseFloat(a.curCSS(h,"margin"+this,true))||0});return k}var g=c==="Width"?["Left","Right"]:["Top","Bottom"],m=c.toLowerCase(),l={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(h){if(h===f)return l["inner"+c].call(this);return this.each(function(){a.style(this,m,d(this,h)+"px")})};a.fn["outer"+
c]=function(h,k){if(typeof h!=="number")return l["outer"+c].call(this,h);return this.each(function(){a.style(this,m,d(this,h,true,k)+"px")})}});a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){var c=b.nodeName.toLowerCase(),d=a.attr(b,"tabindex");if("area"===c){c=b.parentNode;d=c.name;if(!b.href||!d||c.nodeName.toLowerCase()!=="map")return false;b=a("img[usemap=#"+d+"]")[0];return!!b&&e(b)}return(/input|select|textarea|button|object/.test(c)?!b.disabled:"a"==
c?b.href||!isNaN(d):!isNaN(d))&&e(b)},tabbable:function(b){var c=a.attr(b,"tabindex");return(isNaN(c)||c>=0)&&a(b).is(":focusable")}})}})(jQuery);
(function(a,f){var e=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){if(!c)if(!b||a.filter(b,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return e.call(a(this),b,c)})};a.widget=function(b,c,d){var g=b.split(".")[0],m;b=b.split(".")[1];m=g+"-"+b;if(!d){d=c;c=a.Widget}a.expr[":"][m]=function(l){return!!a.data(l,b)};a[g]=a[g]||{};a[g][b]=function(l,h){arguments.length&&this._createWidget(l,h)};c=new c;c.options=a.extend(true,{},c.options);
a[g][b].prototype=a.extend(true,c,{namespace:g,widgetName:b,widgetEventPrefix:a[g][b].prototype.widgetEventPrefix||b,widgetBaseClass:m},d);a.widget.bridge(b,a[g][b])};a.widget.bridge=function(b,c){a.fn[b]=function(d){var g=typeof d==="string",m=Array.prototype.slice.call(arguments,1),l=this;d=!g&&m.length?a.extend.apply(null,[true,d].concat(m)):d;if(g&&d.substring(0,1)==="_")return l;g?this.each(function(){var h=a.data(this,b),k=h&&a.isFunction(h[d])?h[d].apply(h,m):h;if(k!==h&&k!==f){l=k;return false}}):
this.each(function(){var h=a.data(this,b);if(h){d&&h.option(d);h._init()}else a.data(this,b,new c(d,this))});return l}};a.Widget=function(b,c){arguments.length&&this._createWidget(b,c)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,c){a.data(c,this.widgetName,this);this.element=a(c);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(c)[this.widgetName],b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});
this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,c){var d=b,g=this;if(arguments.length===0)return a.extend({},g.options);if(typeof b==="string"){if(c===f)return this.options[b];d={};d[b]=c}a.each(d,function(m,
l){g._setOption(m,l)});return g},_setOption:function(b,c){this.options[b]=c;if(b==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,c,d){var g=this.options[b];c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d=d||{};if(c.originalEvent){b=
a.event.props.length;for(var m;b;){m=a.event.props[--b];c[m]=c.originalEvent[m]}}this.element.trigger(c,d);return!(a.isFunction(g)&&g.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var f=this;this.element.bind("mousedown."+this.widgetName,function(e){return f._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(f._preventClickEvent){f._preventClickEvent=false;e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(f){f.originalEvent=f.originalEvent||{};if(!f.originalEvent.mouseHandled){this._mouseStarted&&
this._mouseUp(f);this._mouseDownEvent=f;var e=this,b=f.which==1,c=typeof this.options.cancel=="string"?a(f.target).parents().add(f.target).filter(this.options.cancel).length:false;if(!b||c||!this._mouseCapture(f))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=this._mouseStart(f)!==false;if(!this._mouseStarted){f.preventDefault();
return true}}this._mouseMoveDelegate=function(d){return e._mouseMove(d)};this._mouseUpDelegate=function(d){return e._mouseUp(d)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||f.preventDefault();return f.originalEvent.mouseHandled=true}},_mouseMove:function(f){if(a.browser.msie&&!f.button)return this._mouseUp(f);if(this._mouseStarted){this._mouseDrag(f);return f.preventDefault()}if(this._mouseDistanceMet(f)&&
this._mouseDelayMet(f))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,f)!==false)?this._mouseDrag(f):this._mouseUp(f);return!this._mouseStarted},_mouseUp:function(f){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=f.target==this._mouseDownEvent.target;this._mouseStop(f)}return false},_mouseDistanceMet:function(f){return Math.max(Math.abs(this._mouseDownEvent.pageX-
f.pageX),Math.abs(this._mouseDownEvent.pageY-f.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var f=/left|center|right/,e=/top|center|bottom/,b=a.fn.position,c=a.fn.offset;a.fn.position=function(d){if(!d||!d.of)return b.apply(this,arguments);d=a.extend({},d);var g=a(d.of),m=(d.collision||"flip").split(" "),l=d.offset?d.offset.split(" "):[0,0],h,k,n;if(d.of.nodeType===9){h=g.width();k=g.height();n={top:0,left:0}}else if(d.of.scrollTo&&d.of.document){h=g.width();k=g.height();n={top:g.scrollTop(),left:g.scrollLeft()}}else if(d.of.preventDefault){d.at="left top";h=k=
0;n={top:d.of.pageY,left:d.of.pageX}}else{h=g.outerWidth();k=g.outerHeight();n=g.offset()}a.each(["my","at"],function(){var o=(d[this]||"").split(" ");if(o.length===1)o=f.test(o[0])?o.concat(["center"]):e.test(o[0])?["center"].concat(o):["center","center"];o[0]=f.test(o[0])?o[0]:"center";o[1]=e.test(o[1])?o[1]:"center";d[this]=o});if(m.length===1)m[1]=m[0];l[0]=parseInt(l[0],10)||0;if(l.length===1)l[1]=l[0];l[1]=parseInt(l[1],10)||0;if(d.at[0]==="right")n.left+=h;else if(d.at[0]==="center")n.left+=
h/2;if(d.at[1]==="bottom")n.top+=k;else if(d.at[1]==="center")n.top+=k/2;n.left+=l[0];n.top+=l[1];return this.each(function(){var o=a(this),q=o.outerWidth(),r=o.outerHeight(),p=a.extend({},n);if(d.my[0]==="right")p.left-=q;else if(d.my[0]==="center")p.left-=q/2;if(d.my[1]==="bottom")p.top-=r;else if(d.my[1]==="center")p.top-=r/2;p.left=parseInt(p.left);p.top=parseInt(p.top);a.each(["left","top"],function(s,t){a.ui.position[m[s]]&&a.ui.position[m[s]][t](p,{targetWidth:h,targetHeight:k,elemWidth:q,
elemHeight:r,offset:l,my:d.my,at:d.at})});a.fn.bgiframe&&o.bgiframe();o.offset(a.extend(p,{using:d.using}))})};a.ui.position={fit:{left:function(d,g){var m=a(window);m=d.left+g.elemWidth-m.width()-m.scrollLeft();d.left=m>0?d.left-m:Math.max(0,d.left)},top:function(d,g){var m=a(window);m=d.top+g.elemHeight-m.height()-m.scrollTop();d.top=m>0?d.top-m:Math.max(0,d.top)}},flip:{left:function(d,g){if(g.at[0]!=="center"){var m=a(window);m=d.left+g.elemWidth-m.width()-m.scrollLeft();var l=g.my[0]==="left"?
-g.elemWidth:g.my[0]==="right"?g.elemWidth:0,h=-2*g.offset[0];d.left+=d.left<0?l+g.targetWidth+h:m>0?l-g.targetWidth+h:0}},top:function(d,g){if(g.at[1]!=="center"){var m=a(window);m=d.top+g.elemHeight-m.height()-m.scrollTop();var l=g.my[1]==="top"?-g.elemHeight:g.my[1]==="bottom"?g.elemHeight:0,h=g.at[1]==="top"?g.targetHeight:-g.targetHeight,k=-2*g.offset[1];d.top+=d.top<0?l+g.targetHeight+k:m>0?l+h+k:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(d,g){if(/static/.test(a.curCSS(d,"position")))d.style.position=
"relative";var m=a(d),l=m.offset(),h=parseInt(a.curCSS(d,"top",true),10)||0,k=parseInt(a.curCSS(d,"left",true),10)||0;l={top:g.top-l.top+h,left:g.left-l.left+k};"using"in g?g.using.call(d,l):m.css(l)};a.fn.offset=function(d){var g=this[0];if(!g||!g.ownerDocument)return null;if(d)return this.each(function(){a.offset.setOffset(this,d)});return c.call(this)}}})(jQuery);window.freebase=window.fb={};
(function(a){if(!window.console)window.console={log:a.noop,info:a.noop,debug:a.noop,warn:a.noop,error:a.noop}})(jQuery,window.freebase);(function(a,f){f.dispatch=function(e,b,c,d){if(typeof b!=="function")return false;e=a.event.fix(e||window.event);c||(c=[]);d||(d=this);return b.apply(d,[e].concat(c))}})(jQuery,window.freebase);
(function(a,f){var e={};f.get_script=function(b,c){var d=e[b];if(d)if(d.state===1)d.callbacks.push(c);else d.state===4&&c();else{d=e[b]={state:0,callbacks:[c]};a.ajax({url:b,dataType:"script",beforeSend:function(){d.state=1},success:function(){d.state=4;a.each(d.callbacks,function(g,m){m()})},error:function(){d.state=-1}})}}})(jQuery,window.freebase);
(function(a,f){a(window).bind("fb.user.signedin",function(m,l){console.log("fb.user.signnedin");f.user=l;var h=a("#nav-username a:first");if(h.length){h[0].href+=f.user.id;h.text(f.user.name)}a("#signedin").show()}).bind("fb.user.signedout",function(){console.log("fb.user.signedout");a("#signedout").show()});if(/^https?\:\/\/((www|devel)\.)?(freebase|sandbox\-freebase|branch\.qa\.metaweb|trunk\.qa\.metaweb)\.com(\:\d+)?/.test(acre.request.app_url)){var e=function(m,l){var h=m.indexOf("|"+l+"_");if(h!=
-1){h=h+2+l.length;var k=m.indexOf("|",h);if(k!=-1)return decodeURIComponent(m.substr(h,k-h))}return null},b=a.cookie("metaweb-user-info");if(b){var c=e(b,"g"),d=e(b,"u"),g=e(b,"p");g||(g="/user/"+this.name);setTimeout(function(){a(window).trigger("fb.user.signedin",{guid:c,name:d,id:g})},0)}else setTimeout(function(){a(window).trigger("fb.user.signedout")},0)}else a.ajax({url:"/acre/account/user_info",dataType:"json",success:function(m){m&&m.code==="/api/status/ok"?a(window).trigger("fb.user.signedin",
{id:m.id,guid:m.guid,name:m.username}):a(window).trigger("fb.user.signedout")},error:function(){a(window).trigger("fb.user.signedout")}})})(jQuery,window.freebase);
(function(a){a(function(){var f=a("#SearchBox .SearchBox-input,#global-search-input"),e=acre.freebase.site_host;f.suggest({service_url:e,soft:true,category:"object",parent:"#site-search-box",align:"right",status:null});var b=a("#site-search-label"),c=a("#site-search-box .fbs-pane");f.bind("fb-select",function(d,g){window.location=e+"/view"+g.id;return false}).bind("fb-pane-show",function(){b.html("<span>Select an item from the list</span>").removeClass("loading")}).bind("fb-textchange",function(){a.trim(f.val())===
""?b.html("<span>Start typing to get some suggestions</span>").removeClass("loading"):b.html("<span>Searching...</span>").addClass("loading")}).bind("fb-error",function(){b.html("<span>Sorry, something went wrong. Please try again later</span>").removeClass("loading")}).focus(function(){b.is(":visible")||a("#site-search-label").slideDown("fast")}).blur(function(){!c.is(":visible")&&b.is(":visible")&&a("#site-search-label").slideUp("fast")});a(".SearchBox-form").submit(function(){return a.trim(a("#global-search-input").val()).length==
0?false:true});a("input, textarea").textPlaceholder()})})(jQuery,window.freebase);(function(a,f){f.disable=function(e){a(e).attr("disabled","disabled").addClass("disabled")};f.enable=function(e){a(e).removeAttr("disabled").removeClass("disabled")}})(jQuery,window.freebase);
(function(a){a.fn.lazyload=function(f){var e={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};f&&a.extend(e,f);var b=this;"scroll"==e.event&&a(e.container).bind("scroll",function(){var c=0;b.each(function(){if(!(a.abovethetop(this,e)||a.leftofbegin(this,e)))if(!a.belowthefold(this,e)&&!a.rightoffold(this,e))a(this).trigger("appear");else if(c++>e.failurelimit)return false});var d=a.grep(b,function(g){return!g.loaded});b=a(d)});this.each(function(){var c=this;undefined==a(c).attr("original")&&
a(c).attr("original",a(c).attr("src"));if("scroll"!=e.event||undefined==a(c).attr("src")||e.placeholder==a(c).attr("src")||a.abovethetop(c,e)||a.leftofbegin(c,e)||a.belowthefold(c,e)||a.rightoffold(c,e)){e.placeholder?a(c).attr("src",e.placeholder):a(c).removeAttr("src");c.loaded=false}else c.loaded=true;a(c).one("appear",function(){this.loaded||a("<img />").bind("load",function(){a(c).hide().attr("src",a(c).attr("original"))[e.effect](e.effectspeed);c.loaded=true}).attr("src",a(c).attr("original"))});
"scroll"!=e.event&&a(c).bind(e.event,function(){c.loaded||a(c).trigger("appear")})});a(e.container).trigger(e.event);return this};a.belowthefold=function(f,e){return(e.container===undefined||e.container===window?a(window).height()+a(window).scrollTop():a(e.container).offset().top+a(e.container).height())<=a(f).offset().top-e.threshold};a.rightoffold=function(f,e){return(e.container===undefined||e.container===window?a(window).width()+a(window).scrollLeft():a(e.container).offset().left+a(e.container).width())<=
a(f).offset().left-e.threshold};a.abovethetop=function(f,e){return(e.container===undefined||e.container===window?a(window).scrollTop():a(e.container).offset().top)>=a(f).offset().top+e.threshold+a(f).height()};a.leftofbegin=function(f,e){return(e.container===undefined||e.container===window?a(window).scrollLeft():a(e.container).offset().left)>=a(f).offset().left+e.threshold+a(f).width()};a.extend(a.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})",
"right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);
(function(a){var f=a.event,e;f.special.smartresize={setup:function(){a(this).bind("resize",f.special.smartresize.handler)},teardown:function(){a(this).unbind("resize",f.special.smartresize.handler)},handler:function(b,c){var d=this,g=arguments;b.type="smartresize";e&&clearTimeout(e);e=setTimeout(function(){jQuery.event.handle.apply(d,g)},c==="execAsap"?0:100)}};a.fn.smartresize=function(b){return b?this.bind("smartresize",b):this.trigger("smartresize",["execAsap"])};a.fn.masonry=function(b,c){function d(l,
h,k,n,o,q){var r=0;for(i=0;i<h;i++)if(k[i]<k[r])r=i;h={left:o.colW*r+o.posLeft,top:k[r]};o.masoned&&q.animate?l.animate(h,q.duration,q.easing):l.css(h);for(i=0;i<n;i++)o.colY[r+i]=k[r]+l.outerHeight(true)}function g(l,h,k){k.colW=h.columnWidth==undefined?k.masoned?l.data("masonry").colW:k.$bricks.outerWidth(true):h.columnWidth;k.colCount=Math.floor(l.width()/k.colW);k.colCount=Math.max(k.colCount,1)}function m(l,h,k){k.masoned||l.css("position","relative");if(!k.masoned||h.appendedContent!=undefined)k.$bricks.css("position",
"absolute");var n=a("<div />");l.prepend(n);k.posTop=Math.round(n.position().top);k.posLeft=Math.round(n.position().left);n.remove();if(k.masoned&&h.appendedContent!=undefined){k.colY=l.data("masonry").colY;i=l.data("masonry").colCount}else{k.colY=[];i=0}for(;i<k.colCount;i++)k.colY[i]=k.posTop;h.singleMode?k.$bricks.each(function(){var o=a(this);d(o,k.colCount,k.colY,1,k,h)}):k.$bricks.each(function(){var o=a(this),q=Math.ceil(o.outerWidth(true)/k.colW);q=Math.min(q,k.colCount);if(q==1)d(o,k.colCount,
k.colY,1,k,h);else{var r=k.colCount+1-q,p=[0];for(i=0;i<r;i++)for(j=p[i]=0;j<q;j++)p[i]=Math.max(p[i],k.colY[i+j]);d(o,r,p,q,k,h)}});for(i=k.wallH=0;i<k.colCount;i++)k.wallH=Math.max(k.wallH,k.colY[i]);n={height:k.wallH-k.posTop};k.masoned&&h.animate?l.animate(n,h.duration,h.easing):l.css(n);c.call(k.$bricks);l.data("masonry",k)}return this.each(function(){var l=a(this),h=a.extend({},a.masonry);h.masoned=l.data("masonry")!=undefined;var k=h.masoned?l.data("masonry").options:{},n=a.extend({},h.defaults,
k,b);h.options=n.saveOptions?n:k;c=c||function(){};n.$brickParent=h.masoned&&n.appendedContent!=undefined?n.appendedContent:l;h.$bricks=n.itemSelector==undefined?n.$brickParent.children():n.$brickParent.find(n.itemSelector);if(h.$bricks.length){g(l,n,h);m(l,n,h);k=k.resizeable;!k&&n.resizeable&&a(window).bind("smartresize.masonry",function(){h.masoned=l.data("masonry")!=undefined;var o=l.data("masonry").colCount;g(l,n,h);h.colCount!=o&&m(l,n,h)});k&&!n.resizeable&&a(window).unbind("smartresize.masonry")}else return this})};
a.masonry={defaults:{singleMode:false,columnWidth:undefined,itemSelector:undefined,appendedContent:undefined,saveOptions:true,resizeable:true,animate:false,duration:"normal",easing:"swing"},colW:undefined,colCount:undefined,colY:undefined,wallH:undefined,masoned:undefined,posTop:0,posLeft:0,options:undefined,$bricks:undefined,$brickParent:undefined}})(jQuery);
$(document).ready(function(){var a={};$("img").lazyload({effect:"fadeIn",threshold:200});$("#gallery").is(":visible")&&$(this).masonry({animate:true});$(".view-mode-option").click(function(){var e=$($(this).attr("href"));if(e.is(":hidden")){$(".view-mode").fadeOut("fast");e.fadeIn("fast")}$(".view-mode-option").removeClass("selected");$(this).addClass("selected");return false});var f=$(".summary-expanded").hide();$(".summary > h2 > .more").click(function(){f.toggle("fast");$(this).text($(this).text()==
"details"?"hide":"details")});$(".collection-img > a").hover(function(){$(this).find("img").animate({left:"0"},{duration:1E3}).animate({left:"-604px"},{duration:4500,easing:"linear"})},function(){$(this).find("img").stop(true,false);$(this).find("img").animate({left:"0px"},{duration:500,easing:"swing"})});$(".collection-show-topics").click(function(){var e=$(this),b=$(this).attr("title"),c=$(this).closest(".collection"),d=c.find(".collection-topics"),g=$(this).attr("data-fb-query");if(d.is(":hidden")){$(this).addClass("expanded");
a.show_topic_panel(e,c,d,b,g)}else{$(this).removeClass("expanded");a.hide_topic_panel(c)}});$("table#collection-table").tablesorter();$("table#collection-table tbody tr:odd").addClass("odd");$(".collection").hover(function(){$(this).addClass("collection-active")},function(){$(this).removeClass("collection-active");$(this).find(".collection-show-topics").removeClass("expanded");a.hide_topic_panel($(this))});a.show_topic_panel=function(e,b,c,d,g){b.find(".collection-info").animate({top:"50px"},300);
c.slideDown(300).fadeIn(200);if(g=="false"){c.addClass("loading");$.ajax({url:"/collection-topics?id="+d,success:function(m){c.removeClass("loading").prepend(m);$more=c.find(".collection-view-all").show();e.attr("data-fb-query","true")}})}};a.hide_topic_panel=function(e){var b=$(e).find(".collection-info");e=$(e).find(".collection-topics");if(e.is(":visible")){b.animate({top:"162px"},300);e.slideUp(300).fadeOut(200)}}});
