jQuery.cookie=function(b,i,f){if(typeof i!="undefined"){f=f||{};if(i===null){i="";f=$.extend({},f);f.expires=-1}var c="";if(f.expires&&(typeof f.expires=="number"||f.expires.toUTCString)){if(typeof f.expires=="number"){c=new Date;c.setTime(c.getTime()+f.expires*24*60*60*1E3)}else c=f.expires;c="; expires="+c.toUTCString()}var e=f.path?"; path="+f.path:"",a=f.domain?"; domain="+f.domain:"";f=f.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(i),c,e,a,f].join("")}else{i=null;if(document.cookie&&
document.cookie!=""){f=document.cookie.split(";");for(c=0;c<f.length;c++){e=jQuery.trim(f[c]);if(e.substring(0,b.length+1)==b+"="){i=decodeURIComponent(e.substring(b.length+1));break}}}return i}};
(function(b){b.ui=b.ui||{};var i=/left|center|right/,f=/top|center|bottom/,c=b.fn.position,e=b.fn.offset;b.fn.position=function(a){if(!a||!a.of)return c.apply(this,arguments);a=b.extend({},a);var d=b(a.of),g=(a.collision||"flip").split(" "),h=a.offset?a.offset.split(" "):[0,0],k,l,m;if(a.of.nodeType===9){k=d.width();l=d.height();m={top:0,left:0}}else if(a.of.scrollTo&&a.of.document){k=d.width();l=d.height();m={top:d.scrollTop(),left:d.scrollLeft()}}else if(a.of.preventDefault){a.at="left top";k=l=
0;m={top:a.of.pageY,left:a.of.pageX}}else{k=d.outerWidth();l=d.outerHeight();m=d.offset()}b.each(["my","at"],function(){var j=(a[this]||"").split(" ");if(j.length===1)j=i.test(j[0])?j.concat(["center"]):f.test(j[0])?["center"].concat(j):["center","center"];j[0]=i.test(j[0])?j[0]:"center";j[1]=f.test(j[1])?j[1]:"center";a[this]=j});if(g.length===1)g[1]=g[0];h[0]=parseInt(h[0],10)||0;if(h.length===1)h[1]=h[0];h[1]=parseInt(h[1],10)||0;if(a.at[0]==="right")m.left+=k;else if(a.at[0]==="center")m.left+=
k/2;if(a.at[1]==="bottom")m.top+=l;else if(a.at[1]==="center")m.top+=l/2;m.left+=h[0];m.top+=h[1];return this.each(function(){var j=b(this),o=j.outerWidth(),p=j.outerHeight(),n=b.extend({},m);if(a.my[0]==="right")n.left-=o;else if(a.my[0]==="center")n.left-=o/2;if(a.my[1]==="bottom")n.top-=p;else if(a.my[1]==="center")n.top-=p/2;n.left=parseInt(n.left);n.top=parseInt(n.top);b.each(["left","top"],function(q,r){b.ui.position[g[q]]&&b.ui.position[g[q]][r](n,{targetWidth:k,targetHeight:l,elemWidth:o,
elemHeight:p,offset:h,my:a.my,at:a.at})});b.fn.bgiframe&&j.bgiframe();j.offset(b.extend(n,{using:a.using}))})};b.ui.position={fit:{left:function(a,d){var g=b(window);g=a.left+d.elemWidth-g.width()-g.scrollLeft();a.left=g>0?a.left-g:Math.max(0,a.left)},top:function(a,d){var g=b(window);g=a.top+d.elemHeight-g.height()-g.scrollTop();a.top=g>0?a.top-g:Math.max(0,a.top)}},flip:{left:function(a,d){if(d.at[0]!=="center"){var g=b(window);g=a.left+d.elemWidth-g.width()-g.scrollLeft();var h=d.my[0]==="left"?
-d.elemWidth:d.my[0]==="right"?d.elemWidth:0,k=-2*d.offset[0];a.left+=a.left<0?h+d.targetWidth+k:g>0?h-d.targetWidth+k:0}},top:function(a,d){if(d.at[1]!=="center"){var g=b(window);g=a.top+d.elemHeight-g.height()-g.scrollTop();var h=d.my[1]==="top"?-d.elemHeight:d.my[1]==="bottom"?d.elemHeight:0,k=d.at[1]==="top"?d.targetHeight:-d.targetHeight,l=-2*d.offset[1];a.top+=a.top<0?h+d.targetHeight+l:g>0?h+k+l:0}}}};if(!b.offset.setOffset){b.offset.setOffset=function(a,d){if(/static/.test(b.curCSS(a,"position")))a.style.position=
"relative";var g=b(a),h=g.offset(),k=parseInt(b.curCSS(a,"top",true),10)||0,l=parseInt(b.curCSS(a,"left",true),10)||0;h={top:d.top-h.top+k,left:d.left-h.left+l};"using"in d?d.using.call(a,h):g.css(h)};b.fn.offset=function(a){var d=this[0];if(!d||!d.ownerDocument)return null;if(a)return this.each(function(){b.offset.setOffset(this,a)});return e.call(this)}}})(jQuery);window.freebase=window.fb={};
(function(b,i){i.dispatch=function(f,c,e,a){if(typeof c!=="function")return false;f=b.event.fix(f||window.event);e||(e=[]);a||(a=this);return c.apply(a,[f].concat(e))}})(jQuery,window.freebase);
(function(b,i){function f(d,g){var h=d.indexOf("|"+g+"_");if(h!=-1){h=h+2+g.length;var k=d.indexOf("|",h);if(k!=-1)return decodeURIComponent(d.substr(h,k-h))}return null}var c=b.cookie("metaweb-user-info");if(c){var e=f(c,"g"),a=f(c,"u");(c=f(c,"p"))||(c="/user/"+this.name);i.user={guid:e,name:a,id:c}}if(i.user){e=b("#nav-username a:first");if(e.length){e[0].href+=i.user.id;e.text(i.user.name)}b("#signedin").show()}else b("#signedout").show()})(jQuery,window.freebase);
(function(b){b(function(){var i=b("#SearchBox .SearchBox-input,#global-search-input"),f=document.location.protocol+"//www.freebase.com";i.suggest({service_url:f,soft:true,category:"object",parent:"#site-search-box",align:"right",status:null});var c=b("#site-search-label"),e=b("#site-search-box .fbs-pane");i.bind("fb-select",function(a,d){window.location=f+"/view"+d.id;return false}).bind("fb-pane-show",function(){c.html("<span>Select an item from the list</span>").removeClass("loading")}).bind("fb-textchange",
function(){b.trim(i.val())===""?c.html("<span>Start typing to get some suggestions</span>").removeClass("loading"):c.html("<span>Searching...</span>").addClass("loading")}).bind("fb-error",function(){c.html("<span>Sorry, something went wrong. Please try again later</span>").removeClass("loading")}).focus(function(){c.is(":visible")||b("#site-search-label").slideDown("fast")}).blur(function(){!e.is(":visible")&&c.is(":visible")&&b("#site-search-label").slideUp("fast")});b(".SearchBox-form").submit(function(){return b.trim(b("#global-search-input").val()).length==
0?false:true})})})(jQuery,window.freebase);
(function(b,i){var f=i.toolbox={show:function(c){clearTimeout(c.data("popup-timeout"));var e=c.data("popup");if(e){e.show();c.removeClass("expand").addClass("collapse");b(".toolbox-textbox",e).focus()}else{e=b('<div class="popup popup-loading toolbox-popup" style="display:none;position:absolute;">');b(document.body).append(e);c.data("popup",e);e.hover(function(){f.show(c)},function(){f.hide(c)});b.ajax({url:c.attr("data-popup-url"),dataType:"jsonp",jsonpCallback:"window.freebase.toolbox.jsonp",data:{id:i.user.id,
context:"#"+c.attr("id")}});e.position({of:c,my:"left top",at:"left bottom"});e.show();c.removeClass("expand").addClass("collapse")}},jsonp:function(c){var e=b(c.result.context);if(e.length)if(e=e.data("popup")){e.html(c.result.html);e.removeClass("popup-loading");f.init_search(e);e.is(":visible")&&b(".toolbox-textbox",e).focus()}},hide:function(c){clearTimeout(c.data("popup-timeout"));c.data("popup-timeout",setTimeout(function(){f.hide_delay(c)},0))},hide_delay:function(c){var e=c.data("popup");
if(e){e.hide();c.removeClass("collapse").addClass("expand")}},init_search:function(c){b(".toolbox-search .toolbox-textbox",c).keydown(f.keydown)},keydown:function(){var c=b(this),e=c.data("keydown.timeout");clearTimeout(e);c.data("keydown.timeout",setTimeout(function(){f.keydown_delay(c)},200))},keydown_delay:function(c){var e=c.data("list");if(e==null){e=c.parents(".toolbox-search").siblings(".toolbox-content").find("li[data-name]");c.data("list",e)}var a=b.trim(c.val()).toLowerCase();a===""?e.show():
e.each(function(){var d=b(this),g=d.attr("data-name");if(g&&g.toLowerCase().indexOf(a)!==-1)d.show();else(g=d.attr("data-id"))&&g.toLowerCase().indexOf(a)!==-1?d.show():d.hide()})}};i.user&&b(".nav-global-menu").addClass("expand").hover(function(){f.show(b(this))},function(){f.hide(b(this))})})(jQuery,window.freebase);
