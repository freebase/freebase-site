/*
 
 jQuery Tools @VERSION Tabs- The basics of UI design.

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tabs/

 Since: November 2008
 Date: @DATE 
 
 jQuery Tools @VERSION Tooltip - UI essentials

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/tooltip/

 Since: November 2008
 Date: @DATE 
*/
jQuery.cookie=function(a,e,d){if(typeof e!="undefined"){d=d||{};if(e===null){e="";d=$.extend({},d);d.expires=-1}var g="";if(d.expires&&(typeof d.expires=="number"||d.expires.toUTCString)){if(typeof d.expires=="number"){g=new Date;g.setTime(g.getTime()+d.expires*24*60*60*1E3)}else g=d.expires;g="; expires="+g.toUTCString()}var c=d.path?"; path="+d.path:"",b=d.domain?"; domain="+d.domain:"";d=d.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(e),g,c,b,d].join("")}else{e=null;if(document.cookie&&
document.cookie!=""){d=document.cookie.split(";");for(g=0;g<d.length;g++){c=jQuery.trim(d[g]);if(c.substring(0,a.length+1)==a+"="){e=decodeURIComponent(c.substring(a.length+1));break}}}return e}};
jQuery.fn.textPlaceholder=function(a){a=a||"#AAA";return this.each(function(){var e=this;if(!(e.placeholder&&"placeholder"in document.createElement(e.tagName))){var d=e.style.color,g=e.getAttribute("placeholder"),c=$(e);if(e.value===""||e.value==g){e.value=g;e.style.color=a;c.data("placeholder-visible",true)}c.focus(function(){this.style.color=d;if(c.data("placeholder-visible")){c.data("placeholder-visible",false);this.value=""}});c.blur(function(){if(this.value===""){c.data("placeholder-visible",
true);this.value=g;this.style.color=a}else{this.style.color=d;c.data("placeholder-visible",false)}});e.form&&$(e.form).submit(function(){if(c.data("placeholder-visible"))e.value=""})}})};
(function(a){a.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(e,d){this.defaults.type=e;this.defaults.name=d},get:function(e,d){var g=a.extend({},this.defaults,d);if(!g.single.length)g.single="metadata";var c=a.data(e,g.single);if(c)return c;c="{}";var b=function(h){if(typeof h!="string")return h;return h=eval("("+h+")")};if(g.type=="html5"){var f={};a(e.attributes).each(function(){var h=this.nodeName;if(h.match(/^data-/))h=h.replace(/^data-/,
"");else return true;f[h]=b(this.nodeValue)})}else{if(g.type=="class"){var i=g.cre.exec(e.className);if(i)c=i[1]}else if(g.type=="elem"){if(!e.getElementsByTagName)return;i=e.getElementsByTagName(g.name);if(i.length)c=a.trim(i[0].innerHTML)}else if(e.getAttribute!=undefined)if(i=e.getAttribute(g.name))c=i;f=b(c.indexOf("{")<0?"{"+c+"}":c)}a.data(e,g.single,f);return f}}});a.fn.metadata=function(e){return a.metadata.get(this[0],e)}})(jQuery);
(function(a){a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.2",plugin:{add:function(e,d,g){e=a.ui[e].prototype;for(var c in g){e.plugins[c]=e.plugins[c]||[];e.plugins[c].push([d,g[c]])}},call:function(e,d,g){if((d=e.plugins[d])&&e.element[0].parentNode)for(var c=0;c<d.length;c++)e.options[d[c][0]]&&d[c][1].apply(e.element,g)}},contains:function(e,d){return document.compareDocumentPosition?e.compareDocumentPosition(d)&16:e!==d&&e.contains(d)},hasScroll:function(e,d){if(a(e).css("overflow")==
"hidden")return false;var g=d&&d=="left"?"scrollLeft":"scrollTop",c=false;if(e[g]>0)return true;e[g]=1;c=e[g]>0;e[g]=0;return c},isOverAxis:function(e,d,g){return e>d&&e<d+g},isOver:function(e,d,g,c,b,f){return a.ui.isOverAxis(e,g,b)&&a.ui.isOverAxis(d,c,f)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(e,d){return typeof e==="number"?this.each(function(){var g=this;setTimeout(function(){a(g).focus();d&&d.call(g)},e)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect",
"none")},scrollParent:function(){var e;e=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",
1))}).eq(0);return/fixed/.test(this.css("position"))||!e.length?a(document):e},zIndex:function(e){if(e!==undefined)return this.css("zIndex",e);if(this.length){e=a(this[0]);for(var d;e.length&&e[0]!==document;){d=e.css("position");if(d=="absolute"||d=="relative"||d=="fixed"){d=parseInt(e.css("zIndex"));if(!isNaN(d)&&d!=0)return d}e=e.parent()}}return 0}});a.extend(a.expr[":"],{data:function(e,d,g){return!!a.data(e,g[3])},focusable:function(e){var d=e.nodeName.toLowerCase(),g=a.attr(e,"tabindex");return(/input|select|textarea|button|object/.test(d)?
!e.disabled:"a"==d||"area"==d?e.href||!isNaN(g):!isNaN(g))&&!a(e)["area"==d?"parents":"closest"](":hidden").length},tabbable:function(e){var d=a.attr(e,"tabindex");return(isNaN(d)||d>=0)&&a(e).is(":focusable")}})}})(jQuery);
(function(a){var e=a.fn.remove;a.fn.remove=function(d,g){return this.each(function(){if(!g)if(!d||a.filter(d,[this]).length)a("*",this).add(this).each(function(){a(this).triggerHandler("remove")});return e.call(a(this),d,g)})};a.widget=function(d,g,c){var b=d.split(".")[0],f;d=d.split(".")[1];f=b+"-"+d;if(!c){c=g;g=a.Widget}a.expr[":"][f]=function(i){return!!a.data(i,d)};a[b]=a[b]||{};a[b][d]=function(i,h){arguments.length&&this._createWidget(i,h)};g=new g;g.options=a.extend({},g.options);a[b][d].prototype=
a.extend(true,g,{namespace:b,widgetName:d,widgetEventPrefix:a[b][d].prototype.widgetEventPrefix||d,widgetBaseClass:f},c);a.widget.bridge(d,a[b][d])};a.widget.bridge=function(d,g){a.fn[d]=function(c){var b=typeof c==="string",f=Array.prototype.slice.call(arguments,1),i=this;c=!b&&f.length?a.extend.apply(null,[true,c].concat(f)):c;if(b&&c.substring(0,1)==="_")return i;b?this.each(function(){var h=a.data(this,d),k=h&&a.isFunction(h[c])?h[c].apply(h,f):h;if(k!==h&&k!==undefined){i=k;return false}}):this.each(function(){var h=
a.data(this,d);if(h){c&&h.option(c);h._init()}else a.data(this,d,new g(c,this))});return i}};a.Widget=function(d,g){arguments.length&&this._createWidget(d,g)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,g){this.element=a(g).data(this.widgetName,this);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(g)[this.widgetName],d);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()});this._create();
this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(d,g){var c=d,b=this;if(arguments.length===0)return a.extend({},b.options);if(typeof d==="string"){if(g===undefined)return this.options[d];c={};c[d]=g}a.each(c,function(f,
i){b._setOption(f,i)});return b},_setOption:function(d,g){this.options[d]=g;if(d==="disabled")this.widget()[g?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",g);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(d,g,c){var b=this.options[d];g=a.Event(g);g.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();c=c||{};if(g.originalEvent){d=
a.event.props.length;for(var f;d;){f=a.event.props[--d];g[f]=g.originalEvent[f]}}this.element.trigger(g,c);return!(a.isFunction(b)&&b.call(this.element[0],g,c)===false||g.isDefaultPrevented())}}})(jQuery);
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(d){return e._mouseDown(d)}).bind("click."+this.widgetName,function(d){if(e._preventClickEvent){e._preventClickEvent=false;d.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(e){e.originalEvent=e.originalEvent||{};if(!e.originalEvent.mouseHandled){this._mouseStarted&&
this._mouseUp(e);this._mouseDownEvent=e;var d=this,g=e.which==1,c=typeof this.options.cancel=="string"?a(e.target).parents().add(e.target).filter(this.options.cancel).length:false;if(!g||c||!this._mouseCapture(e))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();
return true}}this._mouseMoveDelegate=function(b){return d._mouseMove(b)};this._mouseUpDelegate=function(b){return d._mouseUp(b)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||e.preventDefault();return e.originalEvent.mouseHandled=true}},_mouseMove:function(e){if(a.browser.msie&&!e.button)return this._mouseUp(e);if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&
this._mouseDelayMet(e))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false)?this._mouseDrag(e):this._mouseUp(e);return!this._mouseStarted},_mouseUp:function(e){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=e.target==this._mouseDownEvent.target;this._mouseStop(e)}return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-
e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(a){a.ui=a.ui||{};var e=/left|center|right/,d=/top|center|bottom/,g=a.fn.position,c=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var f=a(b.of),i=(b.collision||"flip").split(" "),h=b.offset?b.offset.split(" "):[0,0],k,m,n;if(b.of.nodeType===9){k=f.width();m=f.height();n={top:0,left:0}}else if(b.of.scrollTo&&b.of.document){k=f.width();m=f.height();n={top:f.scrollTop(),left:f.scrollLeft()}}else if(b.of.preventDefault){b.at="left top";k=m=
0;n={top:b.of.pageY,left:b.of.pageX}}else{k=f.outerWidth();m=f.outerHeight();n=f.offset()}a.each(["my","at"],function(){var j=(b[this]||"").split(" ");if(j.length===1)j=e.test(j[0])?j.concat(["center"]):d.test(j[0])?["center"].concat(j):["center","center"];j[0]=e.test(j[0])?j[0]:"center";j[1]=d.test(j[1])?j[1]:"center";b[this]=j});if(i.length===1)i[1]=i[0];h[0]=parseInt(h[0],10)||0;if(h.length===1)h[1]=h[0];h[1]=parseInt(h[1],10)||0;if(b.at[0]==="right")n.left+=k;else if(b.at[0]==="center")n.left+=
k/2;if(b.at[1]==="bottom")n.top+=m;else if(b.at[1]==="center")n.top+=m/2;n.left+=h[0];n.top+=h[1];return this.each(function(){var j=a(this),l=j.outerWidth(),p=j.outerHeight(),q=a.extend({},n);if(b.my[0]==="right")q.left-=l;else if(b.my[0]==="center")q.left-=l/2;if(b.my[1]==="bottom")q.top-=p;else if(b.my[1]==="center")q.top-=p/2;q.left=parseInt(q.left);q.top=parseInt(q.top);a.each(["left","top"],function(t,s){a.ui.position[i[t]]&&a.ui.position[i[t]][s](q,{targetWidth:k,targetHeight:m,elemWidth:l,
elemHeight:p,offset:h,my:b.my,at:b.at})});a.fn.bgiframe&&j.bgiframe();j.offset(a.extend(q,{using:b.using}))})};a.ui.position={fit:{left:function(b,f){var i=a(window);i=b.left+f.elemWidth-i.width()-i.scrollLeft();b.left=i>0?b.left-i:Math.max(0,b.left)},top:function(b,f){var i=a(window);i=b.top+f.elemHeight-i.height()-i.scrollTop();b.top=i>0?b.top-i:Math.max(0,b.top)}},flip:{left:function(b,f){if(f.at[0]!=="center"){var i=a(window);i=b.left+f.elemWidth-i.width()-i.scrollLeft();var h=f.my[0]==="left"?
-f.elemWidth:f.my[0]==="right"?f.elemWidth:0,k=-2*f.offset[0];b.left+=b.left<0?h+f.targetWidth+k:i>0?h-f.targetWidth+k:0}},top:function(b,f){if(f.at[1]!=="center"){var i=a(window);i=b.top+f.elemHeight-i.height()-i.scrollTop();var h=f.my[1]==="top"?-f.elemHeight:f.my[1]==="bottom"?f.elemHeight:0,k=f.at[1]==="top"?f.targetHeight:-f.targetHeight,m=-2*f.offset[1];b.top+=b.top<0?h+f.targetHeight+m:i>0?h+k+m:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(b,f){if(/static/.test(a.curCSS(b,"position")))b.style.position=
"relative";var i=a(b),h=i.offset(),k=parseInt(a.curCSS(b,"top",true),10)||0,m=parseInt(a.curCSS(b,"left",true),10)||0;h={top:f.top-h.top+k,left:f.left-h.left+m};"using"in f?f.using.call(b,h):i.css(h)};a.fn.offset=function(b){var f=this[0];if(!f||!f.ownerDocument)return null;if(b)return this.each(function(){a.offset.setOffset(this,b)});return c.call(this)}}})(jQuery);window.freebase=window.fb={};
(function(a){if(!window.console)window.console={log:a.noop,info:a.noop,debug:a.noop,warn:a.noop,error:a.noop}})(jQuery,window.freebase);(function(a,e){e.dispatch=function(d,g,c,b){if(typeof g!=="function")return false;d=a.event.fix(d||window.event);c||(c=[]);b||(b=this);return g.apply(b,[d].concat(c))}})(jQuery,window.freebase);
(function(a,e){var d={};e.get_script=function(g,c){var b=d[g];if(b)if(b.state===1)b.callbacks.push(c);else b.state===4&&c();else{b=d[g]={state:0,callbacks:[c]};a.ajax({url:g,dataType:"script",beforeSend:function(){b.state=1},success:function(){b.state=4;a.each(b.callbacks,function(f,i){i()})},error:function(){b.state=-1}})}}})(jQuery,window.freebase);
(function(a,e){a(window).bind("fb.user.signedin",function(f,i){console.log("fb.user.signnedin");e.user=i;var h=a("#nav-username a:first");if(h.length){h[0].href+=e.user.id;h.text(e.user.name)}a("#signedin").show()}).bind("fb.user.signedout",function(){console.log("fb.user.signedout");a("#signedout").show()});if(/^https?\:\/\/((.+)\.)?(freebase|sandbox\-freebase|branch\.qa\.metaweb|trunk\.qa\.metaweb)\.com(\:\d+)?/.test(acre.request.app_url)){var d=function(f,i){var h=f.indexOf("|"+i+"_");if(h!=-1){h=
h+2+i.length;var k=f.indexOf("|",h);if(k!=-1)return decodeURIComponent(f.substr(h,k-h))}return null},g=a.cookie("metaweb-user-info");if(g){var c=d(g,"g"),b=d(g,"u");(d=d(g,"p"))||(d="/user/"+this.name);a(window).trigger("fb.user.signedin",{guid:c,name:b,id:d})}else a(window).trigger("fb.user.signedout")}else a.ajax({url:"/acre/account/user_info",dataType:"json",success:function(f){f&&f.code==="/api/status/ok"?a(window).trigger("fb.user.signedin",{id:f.id,guid:f.guid,name:f.username}):a(window).trigger("fb.user.signedout")},
error:function(){a(window).trigger("fb.user.signedout")}})})(jQuery,window.freebase);
(function(a){a(function(){var e=a("#SearchBox .SearchBox-input,#global-search-input"),d=acre.freebase.site_host;e.suggest({service_url:d,soft:true,category:"object",parent:"#site-search-box",align:"right",status:null});var g=a("#site-search-label"),c=a("#site-search-box .fbs-pane");e.bind("fb-select",function(b,f){window.location=d+"/view"+f.id;return false}).bind("fb-pane-show",function(){g.html("<span>Select an item from the list</span>").removeClass("loading")}).bind("fb-textchange",function(){a.trim(e.val())===
""?g.html("<span>Start typing to get some suggestions</span>").removeClass("loading"):g.html("<span>Searching...</span>").addClass("loading")}).bind("fb-error",function(){g.html("<span>Sorry, something went wrong. Please try again later</span>").removeClass("loading")}).focus(function(){g.is(":visible")||a("#site-search-label").slideDown("fast")}).blur(function(){!c.is(":visible")&&g.is(":visible")&&a("#site-search-label").slideUp("fast")});a(".SearchBox-form").submit(function(){return a.trim(a("#global-search-input").val()).length==
0?false:true});a("input, textarea").textPlaceholder()})})(jQuery,window.freebase);
(function(a,e){if(e.user)if(!(typeof acre==="undefined"||typeof acre.c==="undefined")){var d=acre.c;if(d&&d.id){var g=e.permission={jsonp:function(c){g.has_permission=c.result===true;console.log("has_permission",g.has_permission);a(window).trigger("fb.permission.has_permission",g.has_permission)}};a.ajax({url:acre.request.app_url+"/permission/service/has_permission",data:{id:d.id,user_id:e.user.id},dataType:"jsonp",jsonpCallback:"window.freebase.permission.jsonp"})}}})(jQuery,window.freebase);
(function(a){function e(c,b,f){var i=this,h=c.add(this),k=c.find(f.tabs),m=b.jquery?b:c.children(b),n;k.length||(k=c.children());m.length||(m=c.parent().find(b));m.length||(m=a(b));a.extend(this,{click:function(j,l){var p=k.eq(j);if(typeof j=="string"&&j.replace("#","")){p=k.filter("[href*="+j.replace("#","")+"]");j=Math.max(k.index(p),0)}if(f.rotate){var q=k.length-1;if(j<0)return i.click(q,l);if(j>q)return i.click(0,l)}if(!p.length){if(n>=0)return i;j=f.initialIndex;p=k.eq(j)}if(j===n)return i;
l=l||a.Event();l.type="onBeforeClick";h.trigger(l,[j]);if(!l.isDefaultPrevented()){d[f.effect].call(i,j,function(){l.type="onClick";h.trigger(l,[j])});n=j;k.removeClass(f.current);p.addClass(f.current);return i}},getConf:function(){return f},getTabs:function(){return k},getPanes:function(){return m},getCurrentPane:function(){return m.eq(n)},getCurrentTab:function(){return k.eq(n)},getIndex:function(){return n},next:function(){return i.click(n+1)},prev:function(){return i.click(n-1)},destroy:function(){k.unbind(f.event).removeClass(f.current);
m.find("a[href^=#]").unbind("click.T");return i}});a.each("onBeforeClick,onClick".split(","),function(j,l){a.isFunction(f[l])&&a(i).bind(l,f[l]);i[l]=function(p){a(i).bind(l,p);return i}});if(f.history&&a.fn.history){a.tools.history.init(k);f.event="history"}k.each(function(j){a(this).bind(f.event,function(l){i.click(j,l);return l.preventDefault()})});m.find("a[href^=#]").bind("click.T",function(j){i.click(a(this).attr("href"),j)});if(location.hash)i.click(location.hash);else if(f.initialIndex===
0||f.initialIndex>0)i.click(f.initialIndex)}a.tools=a.tools||{version:"@VERSION"};a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:false,history:false},addEffect:function(c,b){d[c]=b}};var d={"default":function(c,b){this.getPanes().hide().eq(c).show();b.call()},fade:function(c,b){var f=this.getConf(),i=f.fadeOutSpeed,h=this.getPanes();i?h.fadeOut(i):h.hide();h.eq(c).fadeIn(f.fadeInSpeed,b)},slide:function(c,b){this.getPanes().slideUp(200);
this.getPanes().eq(c).slideDown(400,b)},ajax:function(c,b){this.getPanes().eq(0).load(this.getTabs().eq(c).attr("href"),b)}},g;a.tools.tabs.addEffect("horizontal",function(c,b){g||(g=this.getPanes().eq(0).width());this.getCurrentPane().animate({width:0},function(){a(this).hide()});this.getPanes().eq(c).animate({width:g},function(){a(this).show();b.call()})});a.fn.tabs=function(c,b){var f=this.data("tabs");if(f){f.destroy();this.removeData("tabs")}if(a.isFunction(b))b={onBeforeClick:b};b=a.extend({},
a.tools.tabs.conf,b);this.each(function(){f=new e(a(this),c,b);a(this).data("tabs",f)});return b.api?f:this}})(jQuery);
(function(a){function e(c,b,f){var i=f.relative?c.position().top:c.offset().top,h=f.relative?c.position().left:c.offset().left,k=f.position[0];i-=b.outerHeight()-f.offset[0];h+=c.outerWidth()+f.offset[1];var m=b.outerHeight()+c.outerHeight();if(k=="center")i+=m/2;if(k=="bottom")i+=m;k=f.position[1];c=b.outerWidth()+c.outerWidth();if(k=="center")h-=c/2;if(k=="left")h-=c;return{top:i,left:h}}function d(c,b){var f=this,i=c.add(f),h,k=0,m=0,n=c.attr("title"),j=g[b.effect],l,p=c.is(":input"),q=p&&c.is(":checkbox, :radio, select, :button, :submit"),
t=c.attr("type"),s=b.events[t]||b.events[p?q?"widget":"input":"def"];if(!j)throw'Nonexistent effect "'+b.effect+'"';s=s.split(/,\s*/);if(s.length!=2)throw"Tooltip: bad events configuration for "+t;c.bind(s[0],function(o){clearTimeout(k);if(b.predelay)m=setTimeout(function(){f.show(o)},b.predelay);else f.show(o)}).bind(s[1],function(o){clearTimeout(m);if(b.delay)k=setTimeout(function(){f.hide(o)},b.delay);else f.hide(o)});if(n&&b.cancelDefault){c.removeAttr("title");c.data("title",n)}a.extend(f,{show:function(o){if(!h){if(n)h=
a(b.layout).addClass(b.tipClass).appendTo(document.body).hide().append(n);else if(b.tip)h=a(b.tip).eq(0);else{h=c.next();h.length||(h=c.parent().next())}if(!h.length)throw"Cannot find tooltip for "+c;}if(f.isShown())return f;h.stop(true,true);var r=e(c,h,b);o=o||a.Event();o.type="onBeforeShow";i.trigger(o,[r]);if(o.isDefaultPrevented())return f;r=e(c,h,b);h.css({position:"absolute",top:r.top,left:r.left});l=true;j[0].call(f,function(){o.type="onShow";l="full";i.trigger(o)});r=b.events.tooltip.split(/,\s*/);
h.bind(r[0],function(){clearTimeout(k);clearTimeout(m)});r[1]&&!c.is("input:not(:checkbox, :radio), textarea")&&h.bind(r[1],function(u){u.relatedTarget!=c[0]&&c.trigger(s[1].split(" ")[0])});return f},hide:function(o){if(!h||!f.isShown())return f;o=o||a.Event();o.type="onBeforeHide";i.trigger(o);if(!o.isDefaultPrevented()){l=false;g[b.effect][1].call(f,function(){o.type="onHide";l=false;i.trigger(o)});return f}},isShown:function(o){return o?l=="full":l},getConf:function(){return b},getTip:function(){return h},
getTrigger:function(){return c}});a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(o,r){a.isFunction(b[r])&&a(f).bind(r,b[r]);f[r]=function(u){a(f).bind(r,u);return f}})}a.tools=a.tools||{version:"@VERSION"};a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:false,cancelDefault:true,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},
layout:"<div/>",tipClass:"tooltip"},addEffect:function(c,b,f){g[c]=[b,f]}};var g={toggle:[function(c){var b=this.getConf(),f=this.getTip();b=b.opacity;b<1&&f.css({opacity:b});f.show();c.call()},function(c){this.getTip().hide();c.call()}],fade:[function(c){var b=this.getConf();this.getTip().fadeTo(b.fadeInSpeed,b.opacity,c)},function(c){this.getTip().fadeOut(this.getConf().fadeOutSpeed,c)}]};a.fn.tooltip=function(c){var b=this.data("tooltip");if(b)return b;c=a.extend(true,{},a.tools.tooltip.conf,c);
if(typeof c.position=="string")c.position=c.position.split(/,?\s/);this.each(function(){b=new d(a(this),c);a(this).data("tooltip",b)});return c.api?b:this}})(jQuery);
(function(a,e){var d=e.schema={init_row_menu:function(g){a(".row-menu-trigger",g).each(function(){a(this).tooltip({events:{def:"click,mouseout"},position:"bottom right",offset:[-10,-10],effect:"fade",delay:300});a(this).closest(".row-menu").children().last().hide()}).css({visibility:"hidden"});a(".hoverable",g).hover(function(){var c=a(this);c.addClass("row-hover");a(".row-menu-trigger",c).css("visibility","visible").hide().fadeIn("fast")},function(){var c=a(this);a(".row-menu-trigger",c).css("visibility",
"hidden");c.removeClass("row-hover")})}};a(function(){a.tablesorter.addParser({id:"schemaName",is:function(){return false},format:function(c){return a(c).text().toLowerCase()},type:"text"});a.tablesorter.addParser({id:"commaDigit",is:function(){return false},format:function(c){return parseInt(c.replace(/\,/g,""))},type:"numeric"});a.tablesorter.defaults.cssAsc="column-header-asc";a.tablesorter.defaults.cssDesc="column-header-desc";a.tablesorter.defaults.cssHeader="column-header";d.init_row_menu();
a(".blurb-trigger").click(function(){var c=a(this),b=c.siblings(".blurb"),f=c.siblings(".blob");if(f.is(":hidden")){f.show();b.hide();c.text("Less")}else{f.hide();b.show();c.text("More")}});var g=a(".breadcrumb-sibling-trigger").outerWidth();a(".breadcrumb-sibling-trigger").tooltip({events:{def:"click,mouseout"},position:"bottom right",offset:[-5,-g],effect:"fade",delay:300,onBeforeShow:function(){this.getTrigger().addClass("active")},onHide:function(){this.getTrigger().removeClass("active")}})})})(jQuery,
window.freebase);
(function(a){a(function(){var e=a(".table-sortable").tablesorter();a("thead th:nth-child(3)",e)[0].count=1;a("thead th:nth-child(4)",e)[0].count=1;a("#schema-search > .section-tabset").tabs("#schema-search > .search-box");var d={domain:[{key:[{namespace:"/"}]}],type:[{"/type/type/domain":[{key:[{namespace:"/"}]}],"a:/type/type/domain":{id:"/freebase",optional:"forbidden"}}],property:[{"/type/property/schema":{type:"/type/type",domain:[{key:[{namespace:"/"}]}],"a:domain":{id:"/freebase",optional:"forbidden"}}}]},
g=a("#domain-search-input"),c=g.closest("form");c.submit(function(){return false});var b={type:"/type/domain"};if(a("#domain-search-toggle-commons").is(":checked"))b.mql_filter=d.domain;g.suggest(b).bind("fb-select",function(j,l){var p=c.attr("action");window.location.href=p+l.id}).focus(function(){this.select()});var f=a("#type-search-input"),i=f.closest("form");i.submit(function(){return false});var h={type:"/type/type"};if(a("#type-search-toggle-commons").is(":checked"))h.mql_filter=d.type;f.suggest(h).bind("fb-select",
function(j,l){var p=i.attr("action");window.location.href=p+l.id}).focus(function(){this.select()});var k=a("#property-search-input"),m=k.closest("form");m.submit(function(){return false});var n={type:"/type/property"};if(a("#property-search-toggle-commons").is(":checked"))n.mql_filter=d.property;k.suggest(n).bind("fb-select",function(j,l){var p=m.attr("action");window.location.href=p+l.id}).focus(function(){this.select()});a(".search-toggle").click(function(){var j=a(this),l=a(this).parent().siblings("form");
l.find(".text-input").focus();j=j.attr("id").split("-");if(l.attr("id")===c.attr("id")){if(j[j.length-1]==="commons")b.mql_filter=d.domain;else delete b.mql_filter;g.suggest(b)}else if(l.attr("id")===i.attr("id")){if(j[j.length-1]==="commons")h.mql_filter=d.type;else delete h.mql_filter;f.suggest(h)}else if(l.attr("id")===m.attr("id")){if(j[j.length-1]==="commons")n.mql_filter=d.property;else delete n.mql_filter;k.suggest(n)}})})})(jQuery,window.freebase);
